<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Hooks Guide for Clean Lifecycles | Fiber</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://docs.gofiber.io/blog/fiber-v3-hooks-guide /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docusaurus_tag content=default /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docsearch:docusaurus_tag content=default /><meta data-rh=true property=og:title content="Hooks Guide for Clean Lifecycles | Fiber"/><meta data-rh=true name=description content="Use hooks to control startup, shutdown, and operational lifecycle more reliably."/><meta data-rh=true property=og:description content="Use hooks to control startup, shutdown, and operational lifecycle more reliably."/><meta data-rh=true property=og:type content=article /><meta data-rh=true property=article:published_time content=2026-02-20T00:00:00.000Z /><meta data-rh=true property=article:author content=https://github.com/gofiber/fiber /><meta data-rh=true property=article:tag content=fiber,v3,hooks,lifecycle,operations,go /><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://docs.gofiber.io/blog/fiber-v3-hooks-guide /><link data-rh=true rel=alternate href=https://docs.gofiber.io/blog/fiber-v3-hooks-guide hreflang=en /><link data-rh=true rel=alternate href=https://docs.gofiber.io/blog/fiber-v3-hooks-guide hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://docs.gofiber.io/blog/fiber-v3-hooks-guide","@type":"BlogPosting","author":{"@type":"Person","description":"Maintainers","image":"https://github.com/gofiber.png","name":"Fiber Team","url":"https://github.com/gofiber/fiber"},"datePublished":"2026-02-20T00:00:00.000Z","description":"Use hooks to control startup, shutdown, and operational lifecycle more reliably.","headline":"Hooks Guide for Clean Lifecycles","isPartOf":{"@id":"https://docs.gofiber.io/blog","@type":"Blog","name":"Fiber Blog"},"keywords":[],"mainEntityOfPage":"https://docs.gofiber.io/blog/fiber-v3-hooks-guide","name":"Hooks Guide for Clean Lifecycles","url":"https://docs.gofiber.io/blog/fiber-v3-hooks-guide"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Fiber RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Fiber Atom Feed"><style>html{visibility:hidden}html[data-theme]{visibility:visible}</style><script>!function(){var e=function(){try{return window.localStorage.getItem("theme")}catch(e){return null}}(),t=e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",t),document.documentElement.setAttribute("data-theme-choice",e||"system"),document.documentElement.style.colorScheme=t,document.body&&(document.body.style.colorScheme=t),new MutationObserver(function(){var e=document.documentElement.getAttribute("data-theme");e&&(document.documentElement.style.colorScheme=e,document.body&&(document.body.style.colorScheme=e))}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}()</script><link rel=icon href=/img/favicon.png><link rel=manifest href=/manifest.json><meta name=theme-color content="rgb(0, 172, 215)"><link rel=stylesheet href=/assets/css/styles.34cc3093.css /><script src=/assets/js/runtime~main.cc386111.js defer></script><script src=/assets/js/main.2b62059c.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg /><link rel=preload as=image href=/img/logo-dark.svg /><link rel=preload as=image href=https://github.com/gofiber.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#fafbfc;color:#091E42 role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">üåü If you like Fiber, don't forget to give us a star on <a href=https://github.com/gofiber/fiber>Github</a> üåü</div><button type=button aria-label=Close class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a href=https://gofiber.io target=_self rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/img/logo.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/logo-dark.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><a class="navbar__item navbar__link" href=/>üè† Home</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>üß© Extra</a><ul class=dropdown__menu><li><a class=dropdown__link href=/contrib/>üß¨ Contrib</a><li><a class=dropdown__link href=/storage/>üì¶ Storage</a><li><a class=dropdown__link href=/template/>Ô∏èüìÑÔ∏è Template</a></ul></div><a href=https://gofiber.io/support target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">‚òï Donate</a><a class="navbar__item navbar__link" href=/recipes/>üç≥ Recipes</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>üì∞ Blog</a><a href=https://github.com/gofiber/awesome-fiber target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">üòé Awesome List</a><a href=https://gofiber.io/discord target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">üí¨ Chat</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" position=right class="navbar__item navbar__link github-stars-navbar-item" aria-label="Fiber on GitHub (loading star count)"><span class=github-stars-navbar-item__icon aria-hidden=true>‚≠ê</span><span class=github-stars-navbar-item__count>‚Ä¶</span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link header-github-link" aria-label="GitHub Repository"></a><ul class=dropdown__menu><li><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class=dropdown__link>üöÄ Fiber<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/contrib target=_blank rel="noopener noreferrer" class=dropdown__link>üß¨ Contrib<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/storage target=_blank rel="noopener noreferrer" class=dropdown__link>üì¶ Storage<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/template target=_blank rel="noopener noreferrer" class=dropdown__link>üìÑÔ∏è Template<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/recipes target=_blank rel="noopener noreferrer" class=dropdown__link>üç≥Ô∏è Recipes<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-extractors-guide>Extractors Guide for Middleware</a><li class=sidebarItem__DBe><a aria-current=page class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href=/blog/fiber-v3-hooks-guide>Hooks Guide for Clean Lifecycles</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-adapter-pattern>Handler Compatibility in the New Router</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-rfc-conformance>RFC Conformance in Practice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-custom-context>Custom Context in Practice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-binding-in-practice>Binding in Practice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-client-deep-dive>New Client Deep Dive</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/spa-delivery-with-fiber-v3>Deliver a SPA with Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/static-server-with-fiber-v3>Serve Static Files with Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/build-a-crud-app-with-fiber>Build a CRUD API with Fiber</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/whats-new-in-fiber-v3>What's New in Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/welcome-to-fiber-blog>Welcome to the Fiber Blog</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_f1Hy>Hooks Guide for Clean Lifecycles</h1><div class="container_mt6G margin-vert--md"><time datetime=2026-02-20T00:00:00.000Z>February 20, 2026</time> ¬∑ <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src=https://github.com/gofiber.png alt="Fiber Team"/></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Fiber Team</span></a></div><small class=authorTitle_nd0D title=Maintainers>Maintainers</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div id=__blog-post-container class=markdown><p>Many runtime incidents happen during transitions, not steady state.</p>
<p>A service is starting up, shutting down, draining workers, or flushing telemetry, and behavior is only partially defined. If your deploy process relies on conventions like "we always flush metrics before exit," but nobody enforced that in code, you get data loss during rollouts. If startup checks happen in scattered goroutines, a failing dependency might not block listen, and you serve errors for the first few seconds after deploy.</p>
<p>Fiber v3 hooks give that lifecycle a concrete structure. Instead of hoping everyone follows the same script, you can register pre and post handlers for startup and shutdown and make the behavior reviewable.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=what-v2-lifecycle-looked-like>What v2 Lifecycle Looked Like<a href=#what-v2-lifecycle-looked-like class=hash-link aria-label="Direct link to What v2 Lifecycle Looked Like" title="Direct link to What v2 Lifecycle Looked Like" translate=no>‚Äã</a></h2>
<p>In v2, the main lifecycle hook was <code>OnShutdown</code>. It ran during server shutdown, but you had no way to distinguish "before the server stops accepting" from "after everything is drained." Teams often worked around this with manual signal handling:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// v2-era pattern: manual signal handling outside Fiber</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">quit </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>make</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>chan</span><span class="token plain"> os</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Signal</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">signal</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Notify</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">quit</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> syscall</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SIGINT</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> syscall</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SIGTERM</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>go</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token operator" style=color:#393A34>&lt;-</span><span class="token plain">quit</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Println</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"stopping workers..."</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// hope this runs before Shutdown</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>stopConsumers</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Shutdown</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Listen</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>":3000"</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>The problem was ordering. You could not guarantee that worker drain happened before or after the server stopped, and the shutdown error was invisible unless you wired it yourself.</p>
<p>v3 replaces <code>OnShutdown</code> with explicit <code>OnPreShutdown</code> and <code>OnPostShutdown</code> hooks, and adds startup message hooks that give you a real contract for each phase.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=startup-message-customization>Startup Message Customization<a href=#startup-message-customization class=hash-link aria-label="Direct link to Startup Message Customization" title="Direct link to Startup Message Customization" translate=no>‚Äã</a></h2>
<p>One of the most practical additions is the ability to customize the startup banner. In production, the default Fiber banner is noise. In staging, you want environment context visible immediately when a pod starts.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnPreStartupMessage</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sm </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">PreStartupMessageData</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">BannerHeader </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"MY-SERVICE "</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Version </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"\n-------"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AddInfo</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"region"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Region"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> os</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Getenv</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"AWS_REGION"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AddInfo</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"release"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Release"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> os</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Getenv</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"RELEASE_SHA"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AddWarning</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"debug"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Debug mode"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"enabled"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnPostStartupMessage</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sm </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">PostStartupMessageData</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!</span><span class="token plain">sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Disabled </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!</span><span class="token plain">sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IsChild </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!</span><span class="token plain">sm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Prevented </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Println</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"startup banner printed, service ready"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>Inside <code>OnPreStartupMessage</code> you have full control:</p>
<ul>
<li class=""><code>sm.BannerHeader</code> replaces the ASCII art banner</li>
<li class=""><code>sm.AddInfo</code>, <code>sm.AddWarning</code>, <code>sm.AddError</code> add labeled entries</li>
<li class=""><code>sm.ResetEntries()</code> clears all default entries if you want a clean slate</li>
<li class=""><code>sm.PreventDefault = true</code> suppresses the banner entirely without affecting other hooks</li>
</ul>
<p>The <code>PostStartupMessageData</code> gives you flags to check whether the banner was actually printed (<code>Disabled</code>, <code>IsChild</code>, <code>Prevented</code>), so you can gate post-startup logic accordingly.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=shutdown-hooks-with-clear-phases>Shutdown Hooks with Clear Phases<a href=#shutdown-hooks-with-clear-phases class=hash-link aria-label="Direct link to Shutdown Hooks with Clear Phases" title="Direct link to Shutdown Hooks with Clear Phases" translate=no>‚Äã</a></h2>
<p>The shutdown hooks split a single event into two phases with different responsibilities:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnPreShutdown</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Println</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"pre-shutdown: stop accepting new work"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>stopConsumers</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnPostShutdown</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"shutdown had errors: %v"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token function" style=color:#d73a49>alertOps</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>flushMetrics</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p><code>OnPreShutdown</code> runs before the server finishes shutting down. This is where you stop queue consumers, cancel background workers, and drain in-flight requests.</p>
<p><code>OnPostShutdown</code> runs after the server is down and receives the shutdown error. This is where you flush metrics, close database pools, and send final telemetry. The error parameter tells you whether shutdown was clean or not, so you can adjust your cleanup accordingly.</p>
<p>Important: when using shutdown hooks, <code>app.Listen()</code> must run in a goroutine so <code>app.Shutdown()</code> is reachable:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>go</span><span class="token plain"> app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Listen</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>":3000"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ... signal handling ...</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Shutdown</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=route-and-group-registration-hooks>Route and Group Registration Hooks<a href=#route-and-group-registration-hooks class=hash-link aria-label="Direct link to Route and Group Registration Hooks" title="Direct link to Route and Group Registration Hooks" translate=no>‚Äã</a></h2>
<p>Beyond lifecycle, Fiber v3 also provides hooks that fire during route registration. These are useful for building route registries, auto-generating documentation, or enforcing naming conventions at startup time.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Route</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"registered: %s %s"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Method</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Path</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnGroup</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">g fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Group</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"group registered: %s"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> g</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Prefix</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p><code>OnName</code> fires when a route is named via <code>.Name()</code>, which is useful for building route registries or logging named routes:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnName</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Route</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"named route registered: %s %s ‚Üí %s"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Method</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Path</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Name</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/users"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> listUsers</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Name</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"listUsers"</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>If you want to enforce that <em>all</em> routes have names, use <code>OnRoute</code> instead ‚Äî it fires for every registration regardless of whether <code>.Name()</code> was called:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Route</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Name </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"route %s %s must have a name"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Method</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> r</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Path</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=mount-hooks-for-sub-applications>Mount Hooks for Sub-Applications<a href=#mount-hooks-for-sub-applications class=hash-link aria-label="Direct link to Mount Hooks for Sub-Applications" title="Direct link to Mount Hooks for Sub-Applications" translate=no>‚Äã</a></h2>
<p>When you compose applications from sub-apps, <code>OnMount</code> fires after a child app is mounted. The callback receives the parent app, so you can inspect or modify the parent during composition:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">api </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">api</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Hooks</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OnMount</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">parent </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">App</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"api mounted at: %s"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> parent</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>MountPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/api"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> api</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>This is useful for plugin-style architectures where sub-apps need to register shared middleware or verify parent configuration before they start serving.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=putting-it-together-a-production-lifecycle>Putting It Together: A Production Lifecycle<a href=#putting-it-together-a-production-lifecycle class=hash-link aria-label="Direct link to Putting It Together: A Production Lifecycle" title="Direct link to Putting It Together: A Production Lifecycle" translate=no>‚Äã</a></h2>
<p>Here is what a realistic lifecycle setup looks like when you combine several hooks:</p>
<!-- -->
<p>The key insight is that each phase has a clear owner. You can review lifecycle behavior in a pull request the same way you review business logic, because it lives in code with explicit ordering.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=where-to-start>Where to Start<a href=#where-to-start class=hash-link aria-label="Direct link to Where to Start" title="Direct link to Where to Start" translate=no>‚Äã</a></h2>
<p>If your service currently has no lifecycle hooks, start with two:</p>
<ol>
<li class=""><code>OnPreShutdown</code> to drain background work before exit</li>
<li class=""><code>OnPostShutdown</code> to flush telemetry and confirm clean shutdown</li>
</ol>
<p>That alone eliminates the most common class of deploy-related data loss. Once that works, add startup message customization so your team can see environment context in logs without grepping for it.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=internal-references>Internal References<a href=#internal-references class=hash-link aria-label="Direct link to Internal References" title="Direct link to Internal References" translate=no>‚Äã</a></h2>
<ul>
<li class=""><a class="" href=/api/hooks>Hooks API</a></li>
<li class=""><a class="" href=/whats_new>What's New</a></li>
</ul></div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/fiber>fiber</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/v-3>v3</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/hooks>hooks</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/lifecycle>lifecycle</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/operations>operations</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/go>go</a></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/gofiber/docs/tree/master/blog/2026-02-20-fiber-v3-hooks-guide.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/fiber-v3-extractors-guide><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>Extractors Guide for Middleware</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/fiber-v3-adapter-pattern><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Handler Compatibility in the New Router</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#what-v2-lifecycle-looked-like class="table-of-contents__link toc-highlight">What v2 Lifecycle Looked Like</a><li><a href=#startup-message-customization class="table-of-contents__link toc-highlight">Startup Message Customization</a><li><a href=#shutdown-hooks-with-clear-phases class="table-of-contents__link toc-highlight">Shutdown Hooks with Clear Phases</a><li><a href=#route-and-group-registration-hooks class="table-of-contents__link toc-highlight">Route and Group Registration Hooks</a><li><a href=#mount-hooks-for-sub-applications class="table-of-contents__link toc-highlight">Mount Hooks for Sub-Applications</a><li><a href=#putting-it-together-a-production-lifecycle class="table-of-contents__link toc-highlight">Putting It Together: A Production Lifecycle</a><li><a href=#where-to-start class="table-of-contents__link toc-highlight">Where to Start</a><li><a href=#internal-references class="table-of-contents__link toc-highlight">Internal References</a></ul></div></div></div></div></div></div>
<script src=/inkeepChatButton.js type=module></script></body>