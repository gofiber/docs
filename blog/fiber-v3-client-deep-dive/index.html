<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>New Client Deep Dive | Fiber</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://docs.gofiber.io/blog/fiber-v3-client-deep-dive /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docusaurus_tag content=default /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docsearch:docusaurus_tag content=default /><meta data-rh=true property=og:title content="New Client Deep Dive | Fiber"/><meta data-rh=true name=description content="How to use the new Fiber client package for reliable service-to-service communication."/><meta data-rh=true property=og:description content="How to use the new Fiber client package for reliable service-to-service communication."/><meta data-rh=true property=og:type content=article /><meta data-rh=true property=article:published_time content=2026-02-15T00:00:00.000Z /><meta data-rh=true property=article:author content=https://github.com/gofiber/fiber /><meta data-rh=true property=article:tag content=fiber,v3,client,http,go /><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://docs.gofiber.io/blog/fiber-v3-client-deep-dive /><link data-rh=true rel=alternate href=https://docs.gofiber.io/blog/fiber-v3-client-deep-dive hreflang=en /><link data-rh=true rel=alternate href=https://docs.gofiber.io/blog/fiber-v3-client-deep-dive hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://docs.gofiber.io/blog/fiber-v3-client-deep-dive","@type":"BlogPosting","author":{"@type":"Person","description":"Maintainers","image":"https://github.com/gofiber.png","name":"Fiber Team","url":"https://github.com/gofiber/fiber"},"datePublished":"2026-02-15T00:00:00.000Z","description":"How to use the new Fiber client package for reliable service-to-service communication.","headline":"New Client Deep Dive","isPartOf":{"@id":"https://docs.gofiber.io/blog","@type":"Blog","name":"Fiber Blog"},"keywords":[],"mainEntityOfPage":"https://docs.gofiber.io/blog/fiber-v3-client-deep-dive","name":"New Client Deep Dive","url":"https://docs.gofiber.io/blog/fiber-v3-client-deep-dive"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Fiber RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Fiber Atom Feed"><style>html{visibility:hidden}html[data-theme]{visibility:visible}</style><script>!function(){var e=function(){try{return window.localStorage.getItem("theme")}catch(e){return null}}(),t=e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",t),document.documentElement.setAttribute("data-theme-choice",e||"system"),document.documentElement.style.colorScheme=t,document.body&&(document.body.style.colorScheme=t),new MutationObserver(function(){var e=document.documentElement.getAttribute("data-theme");e&&(document.documentElement.style.colorScheme=e,document.body&&(document.body.style.colorScheme=e))}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}()</script><link rel=icon href=/img/favicon.png><link rel=manifest href=/manifest.json><meta name=theme-color content="rgb(0, 172, 215)"><link rel=stylesheet href=/assets/css/styles.34cc3093.css /><script src=/assets/js/runtime~main.cc386111.js defer></script><script src=/assets/js/main.2b62059c.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg /><link rel=preload as=image href=/img/logo-dark.svg /><link rel=preload as=image href=https://github.com/gofiber.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#fafbfc;color:#091E42 role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">üåü If you like Fiber, don't forget to give us a star on <a href=https://github.com/gofiber/fiber>Github</a> üåü</div><button type=button aria-label=Close class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a href=https://gofiber.io target=_self rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/img/logo.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/logo-dark.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><a class="navbar__item navbar__link" href=/>üè† Home</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>üß© Extra</a><ul class=dropdown__menu><li><a class=dropdown__link href=/contrib/>üß¨ Contrib</a><li><a class=dropdown__link href=/storage/>üì¶ Storage</a><li><a class=dropdown__link href=/template/>Ô∏èüìÑÔ∏è Template</a></ul></div><a href=https://gofiber.io/support target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">‚òï Donate</a><a class="navbar__item navbar__link" href=/recipes/>üç≥ Recipes</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>üì∞ Blog</a><a href=https://github.com/gofiber/awesome-fiber target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">üòé Awesome List</a><a href=https://gofiber.io/discord target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">üí¨ Chat</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" position=right class="navbar__item navbar__link github-stars-navbar-item" aria-label="Fiber on GitHub (loading star count)"><span class=github-stars-navbar-item__icon aria-hidden=true>‚≠ê</span><span class=github-stars-navbar-item__count>‚Ä¶</span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link header-github-link" aria-label="GitHub Repository"></a><ul class=dropdown__menu><li><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class=dropdown__link>üöÄ Fiber<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/contrib target=_blank rel="noopener noreferrer" class=dropdown__link>üß¨ Contrib<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/storage target=_blank rel="noopener noreferrer" class=dropdown__link>üì¶ Storage<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/template target=_blank rel="noopener noreferrer" class=dropdown__link>üìÑÔ∏è Template<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/recipes target=_blank rel="noopener noreferrer" class=dropdown__link>üç≥Ô∏è Recipes<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-extractors-guide>Extractors Guide for Middleware</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-hooks-guide>Hooks Guide for Clean Lifecycles</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-adapter-pattern>Handler Compatibility in the New Router</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-rfc-conformance>RFC Conformance in Practice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-custom-context>Custom Context in Practice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/fiber-v3-binding-in-practice>Binding in Practice</a><li class=sidebarItem__DBe><a aria-current=page class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href=/blog/fiber-v3-client-deep-dive>New Client Deep Dive</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/spa-delivery-with-fiber-v3>Deliver a SPA with Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/static-server-with-fiber-v3>Serve Static Files with Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/build-a-crud-app-with-fiber>Build a CRUD API with Fiber</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/whats-new-in-fiber-v3>What's New in Fiber v3</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/blog/welcome-to-fiber-blog>Welcome to the Fiber Blog</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_f1Hy>New Client Deep Dive</h1><div class="container_mt6G margin-vert--md"><time datetime=2026-02-15T00:00:00.000Z>February 15, 2026</time> ¬∑ <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src=https://github.com/gofiber.png alt="Fiber Team"/></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Fiber Team</span></a></div><small class=authorTitle_nd0D title=Maintainers>Maintainers</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div id=__blog-post-container class=markdown><p>In many backend teams, outbound HTTP calls are still treated like helper code. They live in random utility functions, each call has slightly different timeout behavior, and when incidents happen no one is fully sure which upstream policy is actually active.</p>
<p>That works while a service has two dependencies. It starts to hurt when a service has ten. Timeout drift, inconsistent retry behavior, missing correlation headers, and ad-hoc error mapping become real operational problems. When your on-call engineer cannot tell which upstream policy is in effect during an incident, the outbound client is the root cause even when the upstream itself is fine.</p>
<p>The v3 client package addresses this by treating outbound HTTP as a first-class concern. You define client behavior once, override it where needed, and keep request policy visible in one place.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=how-outbound-calls-looked-in-v2-era-code>How Outbound Calls Looked in v2-era Code<a href=#how-outbound-calls-looked-in-v2-era-code class=hash-link aria-label="Direct link to How Outbound Calls Looked in v2-era Code" title="Direct link to How Outbound Calls Looked in v2-era Code" translate=no>‚Äã</a></h2>
<p>Most v2 services used <code>net/http</code> or <code>fasthttp</code> directly for outbound requests. The typical pattern was scattered one-off configurations:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// v2-era: ad-hoc outbound calls</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>fetchUser</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">User</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    req</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>_</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> http</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewRequest</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"GET"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"https://users.internal/users/"</span><span class="token operator" style=color:#393A34>+</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    req</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Header</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Set</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Authorization"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Bearer "</span><span class="token operator" style=color:#393A34>+</span><span class="token plain">token</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    client </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">http</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Client</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain">Timeout</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Second</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    resp</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">req</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// ... error handling, body parsing, cleanup</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>Each function created its own client, set its own timeout, and handled its own headers. When the team wanted to add tracing or change the timeout, they had to find and update every call site. Policy drift was inevitable.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=start-with-a-client-factory>Start with a Client Factory<a href=#start-with-a-client-factory class=hash-link aria-label="Direct link to Start with a Client Factory" title="Direct link to Start with a Client Factory" translate=no>‚Äã</a></h2>
<p>The v3 client package encourages creating long-lived, configured client instances. A factory function makes this pattern explicit:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"time"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"github.com/gofiber/fiber/v3/client"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>NewUsersClient</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Client </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token function" style=color:#d73a49>SetBaseURL</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"https://users.internal"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token function" style=color:#d73a49>SetTimeout</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>1500</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Millisecond</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token function" style=color:#d73a49>SetHeader</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"X-Caller-Service"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"billing-api"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>This is simple, but it changes daily engineering behavior. New endpoints stop reinventing outbound setup and instead depend on a known client contract. Timeout, base URL, and default headers are defined once and shared across all calls through this client.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=per-request-overrides>Per-Request Overrides<a href=#per-request-overrides class=hash-link aria-label="Direct link to Per-Request Overrides" title="Direct link to Per-Request Overrides" translate=no>‚Äã</a></h2>
<p>When a specific call needs different behavior, overrides are explicit and local:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>FetchTenant</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cli </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Client</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tenantID</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> reqID </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Response</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/tenants/:id"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        PathParam</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>map</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"id"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> tenantID</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        Header</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">    </span><span class="token keyword" style=color:#00009f>map</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"X-Request-ID"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> reqID</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        Timeout</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">   </span><span class="token number" style=color:#36acaa>600</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Millisecond</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>The <code>Config</code> struct supports headers, path parameters, query parameters, cookies, body, form data, file uploads, context propagation, max redirects, and timeout ‚Äî all per request. A good review question here is: "Why is this override different from the default?" If the answer is clear, the override belongs here. If not, move the policy back into shared defaults.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=retry-configuration>Retry Configuration<a href=#retry-configuration class=hash-link aria-label="Direct link to Retry Configuration" title="Direct link to Retry Configuration" translate=no>‚Äã</a></h2>
<p>For transient failures, the client supports retry policies:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">cli </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetBaseURL</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"https://api.internal"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetRetryConfig</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>&</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">RetryConfig</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        MaxRetryCount</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">   </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        InitialInterval</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Millisecond</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>Retries apply to the configured client and can be tuned per upstream. This is especially useful for internal service calls where transient network errors are expected during rolling deployments.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=proxy-support>Proxy Support<a href=#proxy-support class=hash-link aria-label="Direct link to Proxy Support" title="Direct link to Proxy Support" translate=no>‚Äã</a></h2>
<p>If your outbound calls need to go through a proxy (corporate environments, egress gateways), the client supports proxy configuration:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">cli </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>SetProxyURL</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"http://proxy.internal:8080"</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>This applies to all requests through the client instance. Combined with base URL and headers, you can model complex network topologies without per-request proxy logic.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=cookie-jar-for-session-continuity>Cookie Jar for Session Continuity<a href=#cookie-jar-for-session-continuity class=hash-link aria-label="Direct link to Cookie Jar for Session Continuity" title="Direct link to Cookie Jar for Session Continuity" translate=no>‚Äã</a></h2>
<p>A lot of teams first see cookie jar support and think it is only for browsers. In practice, it is useful for integration flows and internal tools that still rely on session-style auth.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">jar </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AcquireCookieJar</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>defer</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>ReleaseCookieJar</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">jar</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">cli </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetBaseURL</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"https://auth.internal"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetCookieJar</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">jar</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token boolean" style=color:#36acaa>_</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Post</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/login"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    FormData</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>map</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token string" style=color:#e3116c>"username"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"john"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token string" style=color:#e3116c>"password"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"doe"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> err</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Session cookie is automatically stored and sent with subsequent requests</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">profileResp</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/me"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> err</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Println</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>string</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">profileResp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Body</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>This is especially practical in end-to-end tests where you want session continuity without custom cookie plumbing, and in internal tools that interact with legacy session-based services.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=request-and-response-hooks>Request and Response Hooks<a href=#request-and-response-hooks class=hash-link aria-label="Direct link to Request and Response Hooks" title="Direct link to Request and Response Hooks" translate=no>‚Äã</a></h2>
<p>In mature systems, outbound clients need observability. The v3 client makes this straightforward with request and response hooks:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AddRequestHook</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">c </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Client</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> req </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Request</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    req</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>SetHeader</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"X-Trace-Source"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"fiber-client"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">cli</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>AddResponseHook</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">c </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Client</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> resp </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Response</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> req </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Request</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    log</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"upstream=%s status=%d"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        req</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>URL</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        resp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>StatusCode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>Request hooks run before every outbound call. Use them for tracing headers, authentication token injection, and request logging. Response hooks run after every response. Use them for metrics collection, error classification, and response logging.</p>
<p>This is the right place for cross-cutting concerns. It keeps handler code focused on business behavior and ensures observability is consistent across all calls through the client.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=debug-mode>Debug Mode<a href=#debug-mode class=hash-link aria-label="Direct link to Debug Mode" title="Direct link to Debug Mode" translate=no>‚Äã</a></h2>
<p>During development, you can enable debug mode to see full request and response details:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">cli </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Debug</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>This logs request and response details for every call through the client. Disable it in production with <code>cli.DisableDebug()</code>. It is a simple feature, but it saves significant time when debugging upstream integration issues.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=a-handler-example-with-error-mapping>A Handler Example with Error Mapping<a href=#a-handler-example-with-error-mapping class=hash-link aria-label="Direct link to A Handler Example with Error Mapping" title="Direct link to A Handler Example with Error Mapping" translate=no>‚Äã</a></h2>
<p>Here is a handler that calls an upstream service and maps errors consistently:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/billing/:id"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">c fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Ctx</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    resp</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> billingClient</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/invoices/:id"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> client</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        PathParam</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>map</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"id"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Params</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"id"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        Header</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>map</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token string" style=color:#e3116c>"X-Request-ID"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"X-Request-ID"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Status</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">StatusBadGateway</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>JSON</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Map</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token string" style=color:#e3116c>"error"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"upstream unavailable"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> resp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>StatusCode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>500</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Status</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">StatusBadGateway</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>JSON</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Map</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token string" style=color:#e3116c>"error"</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"upstream failed"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Status</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">resp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>StatusCode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Send</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">resp</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Body</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>The important part is not syntax. It is that upstream error semantics are explicit: connection failures return 502, upstream 5xx errors return 502 with a generic message, and everything else forwards the upstream status. This pattern prevents leaking upstream error details to clients.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=where-to-introduce-this-first>Where to Introduce This First<a href=#where-to-introduce-this-first class=hash-link aria-label="Direct link to Where to Introduce This First" title="Direct link to Where to Introduce This First" translate=no>‚Äã</a></h2>
<p>If you want fast impact, migrate the noisiest dependency first. Usually that is the upstream that already causes timeout and retry tickets. Move only that path to a shared client layer and compare behavior over one week.</p>
<p>You will usually see better consistency in logs, easier debugging, and clearer ownership of outbound policy.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=internal-references>Internal References<a href=#internal-references class=hash-link aria-label="Direct link to Internal References" title="Direct link to Internal References" translate=no>‚Äã</a></h2>
<ul>
<li class=""><a class="" href=/client/rest>Client REST</a></li>
<li class=""><a class="" href=/client/examples>Client Examples</a></li>
<li class=""><a class="" href=/whats_new>What's New</a></li>
</ul></div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/fiber>fiber</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/v-3>v3</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/client>client</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/http>http</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/blog/tags/go>go</a></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/gofiber/docs/tree/master/blog/2026-02-15-fiber-v3-client-deep-dive.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/fiber-v3-binding-in-practice><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>Binding in Practice</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/spa-delivery-with-fiber-v3><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Deliver a SPA with Fiber v3</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#how-outbound-calls-looked-in-v2-era-code class="table-of-contents__link toc-highlight">How Outbound Calls Looked in v2-era Code</a><li><a href=#start-with-a-client-factory class="table-of-contents__link toc-highlight">Start with a Client Factory</a><li><a href=#per-request-overrides class="table-of-contents__link toc-highlight">Per-Request Overrides</a><li><a href=#retry-configuration class="table-of-contents__link toc-highlight">Retry Configuration</a><li><a href=#proxy-support class="table-of-contents__link toc-highlight">Proxy Support</a><li><a href=#cookie-jar-for-session-continuity class="table-of-contents__link toc-highlight">Cookie Jar for Session Continuity</a><li><a href=#request-and-response-hooks class="table-of-contents__link toc-highlight">Request and Response Hooks</a><li><a href=#debug-mode class="table-of-contents__link toc-highlight">Debug Mode</a><li><a href=#a-handler-example-with-error-mapping class="table-of-contents__link toc-highlight">A Handler Example with Error Mapping</a><li><a href=#where-to-introduce-this-first class="table-of-contents__link toc-highlight">Where to Introduce This First</a><li><a href=#internal-references class="table-of-contents__link toc-highlight">Internal References</a></ul></div></div></div></div></div></div>
<script src=/inkeepChatButton.js type=module></script></body>