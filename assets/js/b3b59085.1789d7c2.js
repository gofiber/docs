"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["22124"],{51160:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>o,toc:()=>s,default:()=>c,metadata:()=>i,assets:()=>f,contentTitle:()=>l});var i=JSON.parse('{"id":"addon/retry","title":"Retry Addon","description":"The Retry addon for Fiber retries failed network operations using exponential","source":"@site/docs/core/addon/retry.md","sourceDirName":"addon","slug":"/addon/retry","permalink":"/next/addon/retry","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/fiber/edit/main/docs/addon/retry.md","tags":[],"version":"current","lastUpdatedAt":1771794478000,"frontMatter":{"id":"retry"},"sidebar":"left_sidebar","previous":{"title":"\u{1F50C} Addon","permalink":"/next/category/-addon"},"next":{"title":"\u{1F30E} Client","permalink":"/next/category/-client"}}'),r=t(74848),a=t(84429);let o={id:"retry"},l="Retry Addon",f={},s=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Signatures",id:"signatures",level:2},{value:"Examples",id:"examples",level:2},{value:"Default Config",id:"default-config",level:2},{value:"Custom Config",id:"custom-config",level:2},{value:"Config",id:"config",level:2},{value:"Default Config Example",id:"default-config-example",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"retry-addon",children:"Retry Addon"})}),"\n",(0,r.jsxs)(n.p,{children:["The Retry addon for ",(0,r.jsx)(n.a,{href:"https://github.com/gofiber/fiber",children:"Fiber"})," retries failed network operations using exponential\nbackoff with jitter. It repeatedly invokes a function until it succeeds or the maximum number of attempts is\nexhausted. Jitter at each step breaks client synchronization and helps avoid collisions. If all attempts fail, the\naddon returns an error."]}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#signatures",children:"Signatures"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#examples",children:"Examples"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#default-config",children:"Default Config"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#custom-config",children:"Custom Config"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#config",children:"Config"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#default-config-example",children:"Default Config Example"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"signatures",children:"Signatures"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func NewExponentialBackoff(config ...retry.Config) *retry.ExponentialBackoff\n"})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n\n    "github.com/gofiber/fiber/v3/addon/retry"\n    "github.com/gofiber/fiber/v3/client"\n)\n\nfunc main() {\n    expBackoff := retry.NewExponentialBackoff(retry.Config{})\n\n    // Local variables used inside Retry\n    var resp *client.Response\n    var err error\n\n    // Retry a network request and return an error to signal another attempt\n    err = expBackoff.Retry(func() error {\n        client := client.New()\n        resp, err = client.Get("https://gofiber.io")\n        if err != nil {\n            return fmt.Errorf("GET gofiber.io failed: %w", err)\n        }\n        if resp.StatusCode() != 200 {\n            return fmt.Errorf("GET gofiber.io did not return 200 OK")\n        }\n        return nil\n    })\n\n    // If all retries failed, panic\n    if err != nil {\n        panic(err)\n    }\n    fmt.Printf("GET gofiber.io succeeded with status code %d\\n", resp.StatusCode())\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"default-config",children:"Default Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"retry.NewExponentialBackoff()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"custom-config",children:"Custom Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"retry.NewExponentialBackoff(retry.Config{\n    InitialInterval: 2 * time.Second,\n    MaxBackoffTime:  64 * time.Second,\n    Multiplier:      2.0,\n    MaxRetryCount:   15,\n})\n"})}),"\n",(0,r.jsx)(n.h2,{id:"config",children:"Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// Config defines the config for addon.\ntype Config struct {\n    // InitialInterval defines the initial time interval for backoff algorithm.\n    //\n    // Optional. Default: 1 * time.Second\n    InitialInterval time.Duration\n\n    // MaxBackoffTime defines maximum time duration for backoff algorithm. When\n    // the algorithm is reached this time, rest of the retries will be maximum\n    // 32 seconds.\n    //\n    // Optional. Default: 32 * time.Second\n    MaxBackoffTime time.Duration\n\n    // Multiplier defines multiplier number of the backoff algorithm.\n    //\n    // Optional. Default: 2.0\n    Multiplier float64\n\n    // MaxRetryCount defines maximum retry count for the backoff algorithm.\n    //\n    // Optional. Default: 10\n    MaxRetryCount int\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"default-config-example",children:"Default Config Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// DefaultConfig is the default config for retry.\nvar DefaultConfig = Config{\n    InitialInterval: 1 * time.Second,\n    MaxBackoffTime:  32 * time.Second,\n    Multiplier:      2.0,\n    MaxRetryCount:   10,\n    currentInterval: 1 * time.Second,\n}\n"})})]})}function c(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},84429:function(e,n,t){t.d(n,{R:()=>o,x:()=>l});var i=t(96540);let r={},a=i.createContext(r);function o(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);