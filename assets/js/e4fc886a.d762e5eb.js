"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["43479"],{8809:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>c,toc:()=>u,default:()=>x,metadata:()=>t,assets:()=>h,contentTitle:()=>d});var t=JSON.parse('{"id":"guide/routing","title":"\u{1F50C} Routing","description":"Routing refers to how an application\'s endpoints (URIs) respond to client requests.","source":"@site/docs/core/guide/routing.md","sourceDirName":"guide","slug":"/guide/routing","permalink":"/next/guide/routing","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/fiber/edit/main/docs/guide/routing.md","tags":[],"version":"current","lastUpdatedAt":1762030608000,"sidebarPosition":1,"frontMatter":{"id":"routing","title":"\u{1F50C} Routing","description":"Routing refers to how an application\'s endpoints (URIs) respond to client requests.","sidebar_position":1,"toc_max_heading_level":4},"sidebar":"left_sidebar","previous":{"title":"\u{1F4D6} Guide","permalink":"/next/category/-guide"},"next":{"title":"\u{1F3AD} Grouping","permalink":"/next/guide/grouping"}}'),s=r(74848),a=r(84429),i=r(84109),l=r(93703),o=r(80043);let c={id:"routing",title:"\u{1F50C} Routing",description:"Routing refers to how an application's endpoints (URIs) respond to client requests.",sidebar_position:1,toc_max_heading_level:4},d,h={},u=[{value:"Handlers",id:"handlers",level:2},...o.toc,{value:"Automatic HEAD routes",id:"automatic-head-routes",level:2},{value:"Paths",id:"paths",level:2},{value:"Examples of route paths based on strings",id:"examples-of-route-paths-based-on-strings",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Example of defining routes with route parameters",id:"example-of-defining-routes-with-route-parameters",level:3},{value:"Constraints",id:"constraints",level:3},{value:"Examples",id:"examples",level:4},{value:"Optional Parameter Example",id:"optional-parameter-example",level:4},{value:"Custom Constraint",id:"custom-constraint",level:4},{value:"Middleware",id:"middleware",level:2},{value:"Example of a middleware function",id:"example-of-a-middleware-function",level:3},{value:"Constraints on Adding Routes Dynamically",id:"constraints-on-adding-routes-dynamically",level:3},{value:"Grouping",id:"grouping",level:2}];function p(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"handlers",children:"Handlers"}),"\n",(0,s.jsx)(o.default,{}),"\n",(0,s.jsx)(n.h2,{id:"automatic-head-routes",children:"Automatic HEAD routes"}),"\n",(0,s.jsxs)(n.p,{children:["Fiber automatically registers a ",(0,s.jsx)(n.code,{children:"HEAD"})," route for every ",(0,s.jsx)(n.code,{children:"GET"})," route you add. The generated handler chain mirrors the ",(0,s.jsx)(n.code,{children:"GET"})," chain, so ",(0,s.jsx)(n.code,{children:"HEAD"})," requests reuse middleware, status codes, and headers while the response body is suppressed."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="GET handlers automatically expose HEAD"',children:'app := fiber.New()\n\napp.Get("/users/:id", func(c fiber.Ctx) error {\n    c.Set("X-User", c.Params("id"))\n    return c.SendStatus(fiber.StatusOK)\n})\n\n// HEAD /users/:id now returns the same headers and status without a body.\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can still register dedicated ",(0,s.jsx)(n.code,{children:"HEAD"})," handlers\u2014even with auto-registration enabled\u2014and Fiber replaces the generated route so your implementation wins:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Override the generated HEAD handler"',children:'app.Head("/users/:id", func(c fiber.Ctx) error {\n    return c.SendStatus(fiber.StatusNoContent)\n})\n'})}),"\n",(0,s.jsxs)(n.p,{children:["To opt out globally, start the app with ",(0,s.jsx)(n.code,{children:"DisableHeadAutoRegister"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Disable automatic HEAD registration"',children:'handler := func(c fiber.Ctx) error {\n    c.Set("X-User", c.Params("id"))\n    return c.SendStatus(fiber.StatusOK)\n}\n\napp := fiber.New(fiber.Config{DisableHeadAutoRegister: true})\napp.Get("/users/:id", handler) // HEAD /users/:id now returns 405 unless you add it manually.\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Auto-generated ",(0,s.jsx)(n.code,{children:"HEAD"})," routes participate in every router scope, including ",(0,s.jsx)(n.code,{children:"Group"})," hierarchies, mounted sub-apps, parameterized and wildcard paths, and static file helpers. They also appear in route listings such as ",(0,s.jsx)(n.code,{children:"app.Stack()"})," so tooling sees both the ",(0,s.jsx)(n.code,{children:"GET"})," and ",(0,s.jsx)(n.code,{children:"HEAD"})," entries."]}),"\n",(0,s.jsx)(n.h2,{id:"paths",children:"Paths"}),"\n",(0,s.jsxs)(n.p,{children:["A route path paired with an HTTP method defines an endpoint. It can be a plain ",(0,s.jsx)(n.strong,{children:"string"})," or a ",(0,s.jsx)(n.strong,{children:"pattern"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"examples-of-route-paths-based-on-strings",children:"Examples of route paths based on strings"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// This route path will match requests to the root route, "/":\napp.Get("/", func(c fiber.Ctx) error {\n    return c.SendString("root")\n})\n\n// This route path will match requests to "/about":\napp.Get("/about", func(c fiber.Ctx) error {\n    return c.SendString("about")\n})\n\n// This route path will match requests to "/random.txt":\napp.Get("/random.txt", func(c fiber.Ctx) error {\n    return c.SendString("random.txt")\n})\n'})}),"\n",(0,s.jsx)(n.p,{children:"As with the Express.js framework, the order in which routes are declared matters.\nRoutes are evaluated sequentially, so more specific paths should appear before those with variables."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Place routes with variable parameters after fixed paths to avoid unintended matches."})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.p,{children:["Route parameters are dynamic segments in a path, either named or unnamed, used to capture values from the URL. Retrieve them with the ",(0,s.jsx)(n.a,{href:"/next/api/ctx#params",children:"Params"})," function using the parameter name or, for unnamed parameters, the wildcard (",(0,s.jsx)(n.code,{children:"*"}),") or plus (",(0,s.jsx)(n.code,{children:"+"}),") symbol with an index."]}),"\n",(0,s.jsxs)(n.p,{children:["The characters ",(0,s.jsx)(n.code,{children:":"}),", ",(0,s.jsx)(n.code,{children:"+"}),", and ",(0,s.jsx)(n.code,{children:"*"})," introduce parameters."]}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"*"})," or ",(0,s.jsx)(n.code,{children:"+"})," to capture segments greedily."]}),"\n",(0,s.jsxs)(n.p,{children:["You can define optional parameters by appending ",(0,s.jsx)(n.code,{children:"?"})," to a named segment. The ",(0,s.jsx)(n.code,{children:"+"})," sign is greedy and required, while ",(0,s.jsx)(n.code,{children:"*"})," acts as an optional greedy wildcard."]}),"\n",(0,s.jsx)(n.h3,{id:"example-of-defining-routes-with-route-parameters",children:"Example of defining routes with route parameters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// Parameters\napp.Get("/user/:name/books/:title", func(c fiber.Ctx) error {\n    fmt.Fprintf(c, "%s\\n", c.Params("name"))\n    fmt.Fprintf(c, "%s\\n", c.Params("title"))\n    return nil\n})\n// Plus - greedy - not optional\napp.Get("/user/+", func(c fiber.Ctx) error {\n    return c.SendString(c.Params("+"))\n})\n\n// Optional parameter\napp.Get("/user/:name?", func(c fiber.Ctx) error {\n    return c.SendString(c.Params("name"))\n})\n\n// Wildcard - greedy - optional\napp.Get("/user/*", func(c fiber.Ctx) error {\n    return c.SendString(c.Params("*"))\n})\n\n// This route path will match requests to "/v1/some/resource/name:customVerb", since the parameter character is escaped\napp.Get(`/v1/some/resource/name\\:customVerb`, func(c fiber.Ctx) error {\n    return c.SendString("Hello, Community")\n})\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The hyphen (",(0,s.jsx)(n.code,{children:"-"}),") and dot (",(0,s.jsx)(n.code,{children:"."}),") are treated literally, so you can combine them with route parameters."]})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Escape special parameter characters with ",(0,s.jsx)(n.code,{children:"\\\\"})," to treat them literally. This technique is useful for custom methods like those in the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/apis/design/custom_methods",children:"Google API Design Guide"}),". Wrap routes in backticks to keep escape sequences clear."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// http://localhost:3000/plantae/prunus.persica\napp.Get("/plantae/:genus.:species", func(c fiber.Ctx) error {\n    fmt.Fprintf(c, "%s.%s\\n", c.Params("genus"), c.Params("species"))\n    return nil // prunus.persica\n})\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// http://localhost:3000/flights/LAX-SFO\napp.Get("/flights/:from-:to", func(c fiber.Ctx) error {\n    fmt.Fprintf(c, "%s-%s\\n", c.Params("from"), c.Params("to"))\n    return nil // LAX-SFO\n})\n'})}),"\n",(0,s.jsx)(n.p,{children:"Fiber's router detects when these characters belong to the literal path and handles them accordingly."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// http://localhost:3000/shop/product/color:blue/size:xs\napp.Get("/shop/product/color::color/size::size", func(c fiber.Ctx) error {\n    fmt.Fprintf(c, "%s:%s\\n", c.Params("color"), c.Params("size"))\n    return nil // blue:xs\n})\n'})}),"\n",(0,s.jsx)(n.p,{children:"You can chain multiple named or unnamed parameters\u2014including wildcard and plus segments\u2014giving the router greater flexibility."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// GET /@v1\n// Params: "sign" -> "@", "param" -> "v1"\napp.Get("/:sign:param", handler)\n\n// GET /api-v1\n// Params: "name" -> "v1"\napp.Get("/api-:name", handler)\n\n// GET /customer/v1/cart/proxy\n// Params: "*1" -> "customer/", "*2" -> "/cart"\napp.Get("/*v1*/proxy", handler)\n\n// GET /v1/brand/4/shop/blue/xs\n// Params: "*1" -> "brand/4", "*2" -> "blue/xs"\napp.Get("/v1/*/shop/*", handler)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Fiber's routing is inspired by Express but intentionally omits regular expression routes due to their performance cost. You can try similar patterns using the Express route tester (v0.1.7)."}),"\n",(0,s.jsx)(n.h3,{id:"constraints",children:"Constraints"}),"\n",(0,s.jsxs)(n.p,{children:["Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values by parameters. The feature was introduced in ",(0,s.jsx)(n.code,{children:"v2.37.0"})," and inspired by ",(0,s.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/routing?view=aspnetcore-6.0#route-constraints",children:".NET Core"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Constraints aren't validation for parameters. If constraints aren't valid for a parameter value, Fiber returns ",(0,s.jsx)(n.strong,{children:"404 handler"}),"."]})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Constraint"}),(0,s.jsx)(n.th,{children:"Example"}),(0,s.jsx)(n.th,{children:"Example matches"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":id<int>"})}),(0,s.jsx)(n.td,{children:"123456789, -123456789"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":active<bool>"})}),(0,s.jsx)(n.td,{children:"true,false"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"guid"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":id<guid>"})}),(0,s.jsx)(n.td,{children:"CD2C1638-1638-72D5-1638-DEADBEEF1638"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":weight<float>"})}),(0,s.jsx)(n.td,{children:"1.234, -1,001.01e8"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"minLen(value)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":username<minLen(4)>"})}),(0,s.jsx)(n.td,{children:"Test (must be at least 4 characters)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"maxLen(value)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":filename<maxLen(8)>"})}),(0,s.jsx)(n.td,{children:"MyFile (must be no more than 8 characters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"len(length)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":filename<len(12)>"})}),(0,s.jsx)(n.td,{children:"somefile.txt (exactly 12 characters)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"min(value)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":age<min(18)>"})}),(0,s.jsx)(n.td,{children:"19 (Integer value must be at least 18)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max(value)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":age<max(120)>"})}),(0,s.jsx)(n.td,{children:"91 (Integer value must be no more than 120)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"range(min,max)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":age<range(18,120)>"})}),(0,s.jsx)(n.td,{children:"91 (Integer value must be at least 18 but no more than 120)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"alpha"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":name<alpha>"})}),(0,s.jsx)(n.td,{children:"Rick (String must consist of one or more alphabetical characters, a-z and case-insensitive)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"datetime"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":dob<datetime(2006\\\\-01\\\\-02)>"})}),(0,s.jsx)(n.td,{children:"2005-11-01"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"regex(expression)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:":date<regex(\\d{4}-\\d{2}-\\d{2})>"})}),(0,s.jsx)(n.td,{children:"2022-08-27 (Must match regular expression)"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.A,{value:"single-constraint",label:"Single Constraint",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'app.Get("/:test<min(5)>", func(c fiber.Ctx) error {\n    return c.SendString(c.Params("test"))\n})\n\n// curl -X GET http://localhost:3000/12\n// 12\n\n// curl -X GET http://localhost:3000/1\n// Not Found\n'})})}),(0,s.jsxs)(l.A,{value:"multiple-constraints",label:"Multiple Constraints",children:[(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:";"})," for multiple constraints."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'app.Get("/:test<min(100);maxLen(5)>", func(c fiber.Ctx) error {\n    return c.SendString(c.Params("test"))\n})\n\n// curl -X GET http://localhost:3000/120000\n// Not Found\n\n// curl -X GET http://localhost:3000/1\n// Not Found\n\n// curl -X GET http://localhost:3000/250\n// 250\n'})})]}),(0,s.jsxs)(l.A,{value:"regex-constraint",label:"Regex Constraint",children:[(0,s.jsx)(n.p,{children:"Fiber precompiles the regex when registering routes, so regex constraints add no runtime overhead."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'app.Get(`/:date<regex(\\d{4}-\\d{2}-\\d{2})>`, func(c fiber.Ctx) error {\n    return c.SendString(c.Params("date"))\n})\n\n// curl -X GET http://localhost:3000/125\n// Not Found\n\n// curl -X GET http://localhost:3000/test\n// Not Found\n\n// curl -X GET http://localhost:3000/2022-08-27\n// 2022-08-27\n'})})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Prefix routing characters with ",(0,s.jsx)(n.code,{children:"\\\\"})," when using the datetime constraint (",(0,s.jsx)(n.code,{children:"*"}),", ",(0,s.jsx)(n.code,{children:"+"}),", ",(0,s.jsx)(n.code,{children:"?"}),", ",(0,s.jsx)(n.code,{children:":"}),", ",(0,s.jsx)(n.code,{children:"/"}),", ",(0,s.jsx)(n.code,{children:"<"}),", ",(0,s.jsx)(n.code,{children:">"}),", ",(0,s.jsx)(n.code,{children:";"}),", ",(0,s.jsx)(n.code,{children:"("}),", ",(0,s.jsx)(n.code,{children:")"}),"), to avoid misparsing."]})}),"\n",(0,s.jsx)(n.h4,{id:"optional-parameter-example",children:"Optional Parameter Example"}),"\n",(0,s.jsx)(n.p,{children:"You can impose constraints on optional parameters as well."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'app.Get("/:test<int>?", func(c fiber.Ctx) error {\n  return c.SendString(c.Params("test"))\n})\n// curl -X GET http://localhost:3000/42\n// 42\n// curl -X GET http://localhost:3000/\n//\n// curl -X GET http://localhost:3000/7.0\n// Not Found\n'})}),"\n",(0,s.jsx)(n.h4,{id:"custom-constraint",children:"Custom Constraint"}),"\n",(0,s.jsxs)(n.p,{children:["Custom constraints can be added to Fiber using the ",(0,s.jsx)(n.code,{children:"app.RegisterCustomConstraint"})," method. Your constraints have to be compatible with the ",(0,s.jsx)(n.code,{children:"CustomConstraint"})," interface."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Attention, custom constraints can now override built-in constraints. If a custom constraint has the same name as a built-in constraint, the custom constraint will be used instead. This allows for more flexibility in defining route parameter constraints."})}),"\n",(0,s.jsx)(n.p,{children:"Add external constraints when you need stricter rules, such as verifying that a parameter is a valid ULID."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"// CustomConstraint is an interface for custom constraints\ntype CustomConstraint interface {\n    // Name returns the name of the constraint.\n    // This name is used in the constraint matching.\n    Name() string\n\n    // Execute executes the constraint.\n    // It returns true if the constraint is matched and right.\n    // param is the parameter value to check.\n    // args are the constraint arguments.\n    Execute(param string, args ...string) bool\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can check the example below:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type UlidConstraint struct {\n    fiber.CustomConstraint\n}\n\nfunc (*UlidConstraint) Name() string {\n    return "ulid"\n}\n\nfunc (*UlidConstraint) Execute(param string, args ...string) bool {\n    _, err := ulid.Parse(param)\n    return err == nil\n}\n\nfunc main() {\n    app := fiber.New()\n    app.RegisterCustomConstraint(&UlidConstraint{})\n\n    app.Get("/login/:id<ulid>", func(c fiber.Ctx) error {\n        return c.SendString("...")\n    })\n\n    app.Listen(":3000")\n\n    // /login/01HK7H9ZE5BFMK348CPYP14S0Z -> 200\n    // /login/12345 -> 404\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"middleware",children:"Middleware"}),"\n",(0,s.jsxs)(n.p,{children:["Functions that are designed to make changes to the request or response are called ",(0,s.jsx)(n.strong,{children:"middleware functions"}),". The ",(0,s.jsx)(n.a,{href:"/next/api/ctx#next",children:"Next"})," is a ",(0,s.jsx)(n.strong,{children:"Fiber"})," router function, when called, executes the ",(0,s.jsx)(n.strong,{children:"next"})," function that ",(0,s.jsx)(n.strong,{children:"matches"})," the current route."]}),"\n",(0,s.jsx)(n.h3,{id:"example-of-a-middleware-function",children:"Example of a middleware function"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'app.Use(func(c fiber.Ctx) error {\n    // Set a custom header on all responses:\n    c.Set("X-Custom-Header", "Hello, World")\n\n    // Go to next middleware:\n    return c.Next()\n})\n\napp.Get("/", func(c fiber.Ctx) error {\n    return c.SendString("Hello, World!")\n})\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Use"})," method path is a ",(0,s.jsx)(n.strong,{children:"mount"}),", or ",(0,s.jsx)(n.strong,{children:"prefix"})," path, and limits middleware to only apply to any paths requested that begin with it."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Prefix matches must now end at a slash boundary (or be an exact match). For example, ",(0,s.jsx)(n.code,{children:"/api"})," runs for ",(0,s.jsx)(n.code,{children:"/api"})," and ",(0,s.jsx)(n.code,{children:"/api/users"})," but no longer for ",(0,s.jsx)(n.code,{children:"/apiv2"}),". Parameter tokens such as ",(0,s.jsx)(n.code,{children:":name"}),", ",(0,s.jsx)(n.code,{children:":name?"}),", ",(0,s.jsx)(n.code,{children:"*"}),", and ",(0,s.jsx)(n.code,{children:"+"})," are still expanded before this boundary check runs."]})}),"\n",(0,s.jsx)(n.h3,{id:"constraints-on-adding-routes-dynamically",children:"Constraints on Adding Routes Dynamically"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Adding routes dynamically after the application has started is not supported due to design and performance considerations. Make sure to define all your routes before the application starts."})}),"\n",(0,s.jsx)(n.h2,{id:"grouping",children:"Grouping"}),"\n",(0,s.jsxs)(n.p,{children:["If you have many endpoints, you can organize your routes using ",(0,s.jsx)(n.code,{children:"Group"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'func main() {\n    app := fiber.New()\n\n    api := app.Group("/api", middleware) // /api\n\n    v1 := api.Group("/v1", middleware)   // /api/v1\n    v1.Get("/list", handler)             // /api/v1/list\n    v1.Get("/user", handler)             // /api/v1/user\n\n    v2 := api.Group("/v2", middleware)   // /api/v2\n    v2.Get("/list", handler)             // /api/v2/list\n    v2.Get("/user", handler)             // /api/v2/user\n\n    log.Fatal(app.Listen(":3000"))\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More information about this in our ",(0,s.jsx)(n.a,{href:"/next/guide/grouping",children:"Grouping Guide"})]})]})}function x(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},80043:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>l,toc:()=>d,default:()=>u,metadata:()=>t,assets:()=>c,contentTitle:()=>o});var t=JSON.parse('{"id":"partials/routing/route-handlers","title":"Route Handlers","description":"Registers a route bound to a specific HTTP method.","source":"@site/docs/core/partials/routing/handler.md","sourceDirName":"partials/routing","slug":"/partials/routing/route-handlers","permalink":"/next/partials/routing/route-handlers","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/fiber/edit/main/docs/partials/routing/handler.md","tags":[],"version":"current","lastUpdatedAt":1762030608000,"frontMatter":{"id":"route-handlers","title":"Route Handlers"}}'),s=r(74848),a=r(84429),i=r(28891);let l={id:"route-handlers",title:"Route Handlers"},o,c={},d=[{value:"Fiber-native handlers (cases 1\u20132)",id:"fiber-native-handlers-cases-12",level:3},{value:"Express-style request handlers (cases 3\u20138)",id:"express-style-request-handlers-cases-38",level:3},{value:"net/http handlers (cases 9\u201311)",id:"nethttp-handlers-cases-911",level:3},{value:"fasthttp handlers (cases 12\u201313)",id:"fasthttp-handlers-cases-1213",level:3}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Registers a route bound to a specific ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods",children:"HTTP method"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Signatures"',children:"// HTTP methods\nfunc (app *App) Get(path string, handler any, handlers ...any) Router\nfunc (app *App) Head(path string, handler any, handlers ...any) Router\nfunc (app *App) Post(path string, handler any, handlers ...any) Router\nfunc (app *App) Put(path string, handler any, handlers ...any) Router\nfunc (app *App) Delete(path string, handler any, handlers ...any) Router\nfunc (app *App) Connect(path string, handler any, handlers ...any) Router\nfunc (app *App) Options(path string, handler any, handlers ...any) Router\nfunc (app *App) Trace(path string, handler any, handlers ...any) Router\nfunc (app *App) Patch(path string, handler any, handlers ...any) Router\n\n// Add allows you to specify multiple methods at once\nfunc (app *App) Add(methods []string, path string, handler any, handlers ...any) Router\n\n// All will register the route on all HTTP methods\n// Almost the same as app.Use but not bound to prefixes\nfunc (app *App) All(path string, handler any, handlers ...any) Router\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Fiber's adapter converts a variety of handler shapes to native\n",(0,s.jsx)(n.code,{children:"func(fiber.Ctx) error"})," callbacks. It currently recognizes thirteen cases (the\nnumbers below match the comments in ",(0,s.jsx)(n.code,{children:"toFiberHandler"})," inside ",(0,s.jsx)(n.code,{children:"adapter.go"}),"). This\nlets you mix Fiber-style handlers with Express-style callbacks and even reuse\n",(0,s.jsx)(n.code,{children:"net/http"})," or ",(0,s.jsx)(n.code,{children:"fasthttp"})," functions."]}),"\n",(0,s.jsx)(n.h3,{id:"fiber-native-handlers-cases-12",children:"Fiber-native handlers (cases 1\u20132)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 1."})," ",(0,s.jsx)(n.code,{children:"fiber.Handler"})," \u2014 the canonical ",(0,s.jsx)(n.code,{children:"func(fiber.Ctx) error"})," form."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 2."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Ctx)"})," \u2014 Fiber runs the function and treats it as if it\nreturned ",(0,s.jsx)(n.code,{children:"nil"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"express-style-request-handlers-cases-38",children:"Express-style request handlers (cases 3\u20138)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 3."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res) error"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 4."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res)"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 5."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res, func() error) error"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 6."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res, func() error)"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 7."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res, func()) error"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 8."})," ",(0,s.jsx)(n.code,{children:"func(fiber.Req, fiber.Res, func())"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The adapter injects a ",(0,s.jsx)(n.code,{children:"next"})," callback when your signature accepts one. Fiber\npropagates downstream errors from ",(0,s.jsx)(n.code,{children:"c.Next()"})," back through the wrapper, so\nreturning those errors remains optional. If you never call the injected ",(0,s.jsx)(n.code,{children:"next"}),"\nfunction, the handler chain stops, matching Express semantics."]}),"\n",(0,s.jsx)(n.h3,{id:"nethttp-handlers-cases-911",children:"net/http handlers (cases 9\u201311)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 9."})," ",(0,s.jsx)(n.code,{children:"http.HandlerFunc"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 10."})," ",(0,s.jsx)(n.code,{children:"http.Handler"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 11."})," ",(0,s.jsx)(n.code,{children:"func(http.ResponseWriter, *http.Request)"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Compatibility overhead",type:"caution",children:(0,s.jsxs)(n.p,{children:["Fiber adapts these handlers through ",(0,s.jsx)(n.code,{children:"fasthttpadaptor"}),". They do not receive\n",(0,s.jsx)(n.code,{children:"fiber.Ctx"}),", cannot call ",(0,s.jsx)(n.code,{children:"c.Next()"}),", and therefore always terminate the handler\nchain. The compatibility layer also adds more overhead than running a native\nFiber handler, so prefer the other forms when possible."]})}),"\n",(0,s.jsx)(n.h3,{id:"fasthttp-handlers-cases-1213",children:"fasthttp handlers (cases 12\u201313)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 12."})," ",(0,s.jsx)(n.code,{children:"fasthttp.RequestHandler"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Case 13."})," ",(0,s.jsx)(n.code,{children:"func(*fasthttp.RequestCtx) error"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["fasthttp handlers run with full access to the underlying ",(0,s.jsx)(n.code,{children:"fasthttp.RequestCtx"}),".\nThey are expected to manage the response directly. Fiber will propagate any\nerror returned by the ",(0,s.jsx)(n.code,{children:"func(*fasthttp.RequestCtx) error"})," variant but otherwise\ndoes not inspect the context state."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Examples"',children:'// Simple GET handler (Fiber accepts both func(fiber.Ctx) and func(fiber.Ctx) error)\napp.Get("/api/list", func(c fiber.Ctx) error {\n    return c.SendString("I\'m a GET request!")\n})\n\n// Reuse an existing net/http handler without manual adaptation\nhttpHandler := http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n    w.WriteHeader(http.StatusNoContent)\n})\n\napp.Get("/foo", httpHandler)\n\n// Align with Express-style handlers using fiber.Req and fiber.Res helpers (works\n// for middleware and routes alike)\napp.Use(func(req fiber.Req, res fiber.Res, next func() error) error {\n    if req.IP() == "192.168.1.254" {\n        return res.SendStatus(fiber.StatusForbidden)\n    }\n    return next()\n})\n\napp.Get("/express", func(req fiber.Req, res fiber.Res) error {\n    return res.SendString("Hello from Express-style handlers!")\n})\n\n// Mount a fasthttp.RequestHandler directly\napp.Get("/bar", func(ctx *fasthttp.RequestCtx) {\n    ctx.SetStatusCode(fiber.StatusAccepted)\n})\n\n// Simple POST handler\napp.Post("/api/register", func(c fiber.Ctx) error {\n    return c.SendString("I\'m a POST request!")\n})\n'})}),"\n",(0,s.jsx)(i.A,{id:"use",children:"#Use"}),"\n",(0,s.jsxs)(n.p,{children:["Can be used for middleware packages and prefix catchers. Prefixes now require either an exact match or a slash boundary, so ",(0,s.jsx)(n.code,{children:"/john"})," matches ",(0,s.jsx)(n.code,{children:"/john"})," and ",(0,s.jsx)(n.code,{children:"/john/doe"})," but not ",(0,s.jsx)(n.code,{children:"/johnnnnn"}),". Parameter tokens like ",(0,s.jsx)(n.code,{children:":name"}),", ",(0,s.jsx)(n.code,{children:":name?"}),", ",(0,s.jsx)(n.code,{children:"*"}),", and ",(0,s.jsx)(n.code,{children:"+"})," are still expanded before the boundary check runs."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Signature"',children:"func (app *App) Use(args ...any) Router\n\n// Fiber inspects args to support these common usage patterns:\n// - app.Use(handler, handlers ...any)\n// - app.Use(path string, handler, handlers ...any)\n// - app.Use(paths []string, handler, handlers ...any)\n// - app.Use(path string, subApp *App)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Each handler argument can independently be a Fiber handler (with or without an\n",(0,s.jsx)(n.code,{children:"error"})," return), an Express-style callback, a ",(0,s.jsx)(n.code,{children:"net/http"})," handler, or any other\nsupported shape including fasthttp callbacks that return errors."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="Examples"',children:'// Match any request\napp.Use(func(c fiber.Ctx) error {\n    return c.Next()\n})\n\n// Match request starting with /api\napp.Use("/api", func(c fiber.Ctx) error {\n    return c.Next()\n})\n\n// Match requests starting with /api or /home (multiple-prefix support)\napp.Use([]string{"/api", "/home"}, func(c fiber.Ctx) error {\n    return c.Next()\n})\n\n// Attach multiple handlers \napp.Use("/api", func(c fiber.Ctx) error {\n    c.Set("X-Custom-Header", random.String(32))\n    return c.Next()\n}, func(c fiber.Ctx) error {\n    return c.Next()\n})\n\n// Mount a sub-app\napp.Use("/api", api)\n'})})]})}function u(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},93703:function(e,n,r){r.d(n,{A:()=>a});var t=r(74848);r(96540);var s=r(39836);function a({children:e,hidden:n,className:r}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,s.A)("tabItem_Ymn6",r),hidden:n,children:e})}},84109:function(e,n,r){r.d(n,{A:()=>b});var t=r(74848),s=r(96540),a=r(39836),i=r(16364),l=r(68251),o=r(56347),c=r(28004),d=r(25580),h=r(12213),u=r(75734);function p(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function x({value:e,tabValues:n}){return n.some(n=>n.value===e)}var m=r(98864);function f({className:e,block:n,selectedValue:r,selectValue:s,tabValues:i}){let o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),d=e=>{let n=e.currentTarget,t=i[o.indexOf(n)].value;t!==r&&(c(n),s(t))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{let r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1]}}n?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:s})=>(0,t.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{o.push(e)},onKeyDown:h,onClick:d,...s,className:(0,a.A)("tabs__item","tabItem_LNqP",s?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:r}){let i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=i.find(e=>e.props.value===r);return e?(0,s.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function j(e){let n=function(e){let n,{defaultValue:r,queryString:t=!1,groupId:a}=e,i=function(e){let{values:n,children:r}=e;return(0,s.useMemo)(()=>{let e=n??p(r).map(({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t})),t=(0,h.XI)(e,(e,n)=>e.value===n.value);if(t.length>0)throw Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,r])}(e),[l,m]=(0,s.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let r=n.find(e=>e.default)??n[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:r,tabValues:i})),[f,g]=function({queryString:e=!1,groupId:n}){let r=(0,o.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(t),(0,s.useCallback)(e=>{if(!t)return;let n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}({queryString:t,groupId:a}),[j,b]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[r,t]=(0,u.Dv)(n);return[r,(0,s.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:a}),v=x({value:n=f??j,tabValues:i})?n:null;return(0,c.A)(()=>{v&&m(v)},[v]),{selectedValue:l,selectValue:(0,s.useCallback)(e=>{if(!x({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);m(e),g(e),b(e)},[g,b,i]),tabValues:i}}(e);return(0,t.jsxs)("div",{className:(0,a.A)(i.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,t.jsx)(f,{...n,...e}),(0,t.jsx)(g,{...n,...e})]})}function b(e){let n=(0,m.A)();return(0,t.jsx)(j,{...e,children:p(e.children)},String(n))}},28891:function(e,n,r){r.d(n,{A:()=>i});var t=r(74848);r(96540);var s=r(12801),a=r(13193);function i({children:e,id:n}){return(0,a.A)().collectAnchor(n),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{id:n,className:"reference anchor",children:[e,(0,t.jsx)(s.A,{to:"#"+n,className:"hash-link"})]})})}},84429:function(e,n,r){r.d(n,{R:()=>i,x:()=>l});var t=r(96540);let s={},a=t.createContext(s);function i(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);