"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["97367"],{62977:function(e,s,i){i.r(s),i.d(s,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>n,assets:()=>d,contentTitle:()=>o});var n=JSON.parse('{"id":"middleware/cors","title":"CORS","description":"CORS (Cross-Origin Resource Sharing) middleware for Fiber lets servers control who can access resources and how. It isn\'t a security feature; it merely relaxes the browser\'s same-origin policy so cross-origin requests can succeed. Learn more on MDN.","source":"@site/docs/core/middleware/cors.md","sourceDirName":"middleware","slug":"/middleware/cors","permalink":"/next/middleware/cors","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/fiber/edit/main/docs/middleware/cors.md","tags":[],"version":"current","lastUpdatedAt":1771794478000,"frontMatter":{"id":"cors"},"sidebar":"left_sidebar","previous":{"title":"Compress","permalink":"/next/middleware/compress"},"next":{"title":"CSRF","permalink":"/next/middleware/csrf"}}'),r=i(74848),l=i(84429);let t={id:"cors"},o="CORS",d={},c=[{value:"Signatures",id:"signatures",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic usage",id:"basic-usage",level:3},{value:"Custom configuration (specific origins, headers, etc.)",id:"custom-configuration-specific-origins-headers-etc",level:3},{value:"Dynamic origin validation",id:"dynamic-origin-validation",level:3},{value:"Prohibited usage",id:"prohibited-usage",level:3},{value:"Config",id:"config",level:2},{value:"Default Config",id:"default-config",level:2},{value:"Subdomain Matching",id:"subdomain-matching",level:2},{value:"Example",id:"example",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Infrastructure Considerations",id:"infrastructure-considerations",level:2},{value:"Option 1: Use Infrastructure-Level CORS (Recommended)",id:"option-1-use-infrastructure-level-cors-recommended",level:3},{value:"Option 2: Application-Level CORS (Fiber Middleware)",id:"option-2-application-level-cors-fiber-middleware",level:3},{value:"Required Headers for CORS Preflight Requests",id:"required-headers-for-cors-preflight-requests",level:3},{value:"CORS Response Headers (Set by Fiber)",id:"cors-response-headers-set-by-fiber",level:3},{value:"Common Infrastructure Issues",id:"common-infrastructure-issues",level:3},{value:"Debugging CORS Issues",id:"debugging-cors-issues",level:3},{value:"Caching Considerations",id:"caching-considerations",level:3},{value:"Choosing the Right Approach",id:"choosing-the-right-approach",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Secure Configurations",id:"secure-configurations",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:3}];function a(e){let s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"cors",children:"CORS"})}),"\n",(0,r.jsxs)(s.p,{children:["CORS (Cross-Origin Resource Sharing) middleware for ",(0,r.jsx)(s.a,{href:"https://github.com/gofiber/fiber",children:"Fiber"})," lets servers control who can access resources and how. It isn't a security feature; it merely relaxes the browser's same-origin policy so cross-origin requests can succeed. Learn more on ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",children:"MDN"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"It adds CORS headers to responses, listing allowed origins, methods, and headers, and handles preflight checks."}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," option to define which origins may send cross-origin requests. It accepts single origins, lists, subdomain patterns, wildcards, and supports dynamic validation with ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["The middleware normalizes ",(0,r.jsx)(s.code,{children:"AllowOrigins"}),", verifies HTTP/HTTPS schemes, and strips trailing slashes. Invalid origins cause a panic. Panic messages and logs redact misconfigured origins by default; set ",(0,r.jsx)(s.code,{children:"DisableValueRedaction"})," to ",(0,r.jsx)(s.code,{children:"true"})," if you need the raw value for troubleshooting."]}),"\n",(0,r.jsxs)(s.p,{children:["Avoid ",(0,r.jsx)(s.a,{href:"#common-pitfalls",children:"common pitfalls"})," such as using wildcard origins with credentials, overly permissive origin lists, or skipping validation with ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),", as misconfiguration can create security risks."]}),"\n",(0,r.jsx)(s.h2,{id:"signatures",children:"Signatures"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:"func New(config ...Config) fiber.Handler\n"})}),"\n",(0,r.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(s.p,{children:"Import the middleware package:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'import (\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/cors"\n)\n'})}),"\n",(0,r.jsx)(s.p,{children:"Once your Fiber app is initialized, apply the middleware in one of the following ways:"}),"\n",(0,r.jsx)(s.h3,{id:"basic-usage",children:"Basic usage"}),"\n",(0,r.jsxs)(s.p,{children:["To use the default configuration, simply use ",(0,r.jsx)(s.code,{children:"cors.New()"}),". This will allow wildcard origins '*', all methods, no credentials, and no headers or exposed headers."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:"app.Use(cors.New())\n"})}),"\n",(0,r.jsx)(s.h3,{id:"custom-configuration-specific-origins-headers-etc",children:"Custom configuration (specific origins, headers, etc.)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'// Initialize default config\napp.Use(cors.New())\n\n// Or extend your config for customization\napp.Use(cors.New(cors.Config{\n    AllowOrigins: []string{"https://gofiber.io", "https://gofiber.net"},\n    AllowHeaders: []string{"Origin", "Content-Type", "Accept"},\n}))\n'})}),"\n",(0,r.jsx)(s.h3,{id:"dynamic-origin-validation",children:"Dynamic origin validation"}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," to programmatically determine whether to allow a request based on its origin. This is useful when you need to validate origins against a database or other dynamic sources. The function should return ",(0,r.jsx)(s.code,{children:"true"})," if the origin is allowed, and ",(0,r.jsx)(s.code,{children:"false"})," otherwise."]}),"\n",(0,r.jsxs)(s.p,{children:["Be sure to review the ",(0,r.jsx)(s.a,{href:"#security-considerations",children:"security considerations"})," when using ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),"."]}),"\n",(0,r.jsxs)(s.admonition,{type:"caution",children:[(0,r.jsxs)(s.p,{children:["Never allow ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," to return ",(0,r.jsx)(s.code,{children:"true"})," for all origins. This is particularly crucial when ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," is set to ",(0,r.jsx)(s.code,{children:"true"}),". Doing so can bypass the restriction of using a wildcard origin with credentials, exposing your application to serious security threats."]}),(0,r.jsxs)(s.p,{children:["If you need to allow wildcard origins, use ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," with a wildcard ",(0,r.jsx)(s.code,{children:'"*"'})," instead of ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),"."]})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'// dbCheckOrigin checks if the origin is in the list of allowed origins in the database.\nfunc dbCheckOrigin(db *sql.DB, origin string) bool {\n    // Placeholder query - adjust according to your database schema and query needs\n    query := "SELECT COUNT(*) FROM allowed_origins WHERE origin = $1"\n    \n    var count int\n    err := db.QueryRow(query, origin).Scan(&count)\n    if err != nil {\n      // Handle error (e.g., log it); for simplicity, we return false here\n      return false\n    }\n    \n    return count > 0\n}\n\n// ...\n\napp.Use(cors.New(cors.Config{\n    AllowOriginsFunc: func(origin string) bool {\n      return dbCheckOrigin(db, origin)\n    },\n}))\n'})}),"\n",(0,r.jsx)(s.h3,{id:"prohibited-usage",children:"Prohibited usage"}),"\n",(0,r.jsxs)(s.p,{children:["The following example is prohibited because it can expose your application to security risks. It sets ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," to ",(0,r.jsx)(s.code,{children:'"*"'})," (a wildcard) and ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," to ",(0,r.jsx)(s.code,{children:"true"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'app.Use(cors.New(cors.Config{\n    AllowOrigins: []string{"*"},\n    AllowCredentials: true,\n}))\n'})}),"\n",(0,r.jsx)(s.p,{children:"This will result in the following panic:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"panic: [CORS] Configuration error: When 'AllowCredentials' is set to true, 'AllowOrigins' cannot contain a wildcard origin '*'. Please specify allowed origins explicitly or adjust 'AllowCredentials' setting.\n"})}),"\n",(0,r.jsx)(s.h2,{id:"config",children:"Config"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"Property"}),(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"Description"}),(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowCredentials"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsxs)(s.td,{style:{textAlign:"left"},children:["AllowCredentials indicates whether or not the response to the request can be exposed when the credentials flag is true. When used as part of a response to a preflight request, this indicates whether or not the actual request can be made using credentials. Note: If true, AllowOrigins cannot be set to a wildcard (",(0,r.jsx)(s.code,{children:'"*"'}),") to prevent security vulnerabilities."]}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowHeaders"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]string"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowHeaders defines a list of request headers that can be used when making the actual request. This is in response to a preflight request."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowMethods"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]string"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowMethods defines a list of methods allowed when accessing the resource. This is used in response to a preflight request."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:'"GET, POST, HEAD, PUT, DELETE, PATCH"'})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowOrigins"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]string"})}),(0,r.jsxs)(s.td,{style:{textAlign:"left"},children:['AllowOrigins defines a list of origins that may access the resource. This supports subdomain matching, so you can use a value like "https://*.example.com" to allow any subdomain of example.com to submit requests. If the special wildcard ',(0,r.jsx)(s.code,{children:'"*"'})," is present in the list, all origins will be allowed."]}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:'["*"]'})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowOriginsFunc"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"func(origin string) bool"})}),(0,r.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," is a function that dynamically determines whether to allow a request based on its origin. If this function returns ",(0,r.jsx)(s.code,{children:"true"}),", the 'Access-Control-Allow-Origin' response header will be set to the request's 'origin' header. This function is only used if the request's origin doesn't match any origin in ",(0,r.jsx)(s.code,{children:"AllowOrigins"}),"."]}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"nil"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AllowPrivateNetwork"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsxs)(s.td,{style:{textAlign:"left"},children:["Indicates whether the ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Private-Network"})," response header should be set to ",(0,r.jsx)(s.code,{children:"true"}),", allowing requests from private networks. This aligns with modern security practices for web applications interacting with private networks."]}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"DisableValueRedaction"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"Disables redaction of misconfigured origins and settings in panics and logs."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"ExposeHeaders"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]string"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"ExposeHeaders defines an allowlist of headers that clients are allowed to access."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"[]"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"MaxAge"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"int"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"MaxAge indicates how long (in seconds) the results of a preflight request can be cached. If you pass MaxAge 0, the Access-Control-Max-Age header will not be added and the browser will use 5 seconds by default. To disable caching completely, pass MaxAge value negative. It will set the Access-Control-Max-Age header to 0."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"0"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"Next"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"func(fiber.Ctx) bool"})}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"Next defines a function to skip this middleware when it returns true."}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:(0,r.jsx)(s.code,{children:"nil"})})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["If AllowOrigins is a zero value ",(0,r.jsx)(s.code,{children:"[]string{}"}),', and AllowOriginsFunc is provided, the middleware will not default to allowing all origins with the wildcard value "*". Instead, it will rely on the AllowOriginsFunc to dynamically determine whether to allow a request based on its origin. This provides more flexibility and control over which origins are allowed.']})}),"\n",(0,r.jsx)(s.h2,{id:"default-config",children:"Default Config"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'var ConfigDefault = Config{\n    Next:             nil,\n    AllowOriginsFunc: nil,\n    AllowOrigins:     []string{"*"},\n    DisableValueRedaction: false,\n    AllowMethods: []string{\n        fiber.MethodGet,\n        fiber.MethodPost,\n        fiber.MethodHead,\n        fiber.MethodPut,\n        fiber.MethodDelete,\n        fiber.MethodPatch,\n    },\n    AllowHeaders:        []string{},\n    AllowCredentials:    false,\n    ExposeHeaders:       []string{},\n    MaxAge:              0,\n    AllowPrivateNetwork: false,\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"subdomain-matching",children:"Subdomain Matching"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," configuration supports matching subdomains at any level. This means you can use a value like ",(0,r.jsx)(s.code,{children:'"https://*.example.com"'})," to allow any subdomain of ",(0,r.jsx)(s.code,{children:"example.com"})," to submit requests, including multiple subdomain levels such as ",(0,r.jsx)(s.code,{children:'"https://sub.sub.example.com"'}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,r.jsxs)(s.p,{children:["If you want to allow CORS requests from any subdomain of ",(0,r.jsx)(s.code,{children:"example.com"}),", including nested subdomains, you can configure the ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," like so:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'app.Use(cors.New(cors.Config{\n    AllowOrigins: []string{"https://*.example.com"},\n}))\n'})}),"\n",(0,r.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsx)(s.p,{children:"The CORS middleware works by adding the necessary CORS headers to responses from your Fiber application. These headers tell browsers what origins, methods, and headers are allowed for cross-origin requests."}),"\n",(0,r.jsx)(s.p,{children:"When a request arrives, the middleware first checks whether it is a preflight request\u2014a CORS mechanism that determines if the actual request is safe to send. Preflight requests are HTTP OPTIONS requests with specific CORS headers. If the request is preflight, the middleware responds with the appropriate CORS headers and ends the request."}),"\n",(0,r.jsxs)(s.admonition,{type:"note",children:[(0,r.jsx)(s.p,{children:"Preflight requests are typically sent by browsers before making actual cross-origin requests, especially for methods other than GET or POST, or when custom headers are used."}),(0,r.jsxs)(s.p,{children:["A preflight request is an HTTP OPTIONS request that includes the ",(0,r.jsx)(s.code,{children:"Origin"}),", ",(0,r.jsx)(s.code,{children:"Access-Control-Request-Method"}),", and optionally ",(0,r.jsx)(s.code,{children:"Access-Control-Request-Headers"})," headers. The browser sends this request to check if the server allows the actual request method and headers."]})]}),"\n",(0,r.jsx)(s.p,{children:"If the request is not preflight, the middleware adds the CORS headers to the response and passes the request to the next handler. The actual CORS headers added depend on the configuration of the middleware."}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," option controls which origins can make cross-origin requests. The middleware handles different ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," configurations as follows:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Single origin:"})," If ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," is set to a single origin like ",(0,r.jsx)(s.code,{children:'"http://www.example.com"'}),", and that origin matches the origin of the incoming request, the middleware adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin: http://www.example.com"})," to the response."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Multiple origins:"})," If ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," is set to multiple origins like ",(0,r.jsx)(s.code,{children:'"https://example.com, https://www.example.com"'}),", the middleware picks the origin that matches the origin of the incoming request."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Subdomain matching:"})," If ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," includes ",(0,r.jsx)(s.code,{children:'"https://*.example.com"'}),", a subdomain like ",(0,r.jsx)(s.code,{children:"https://sub.example.com"})," will be matched and ",(0,r.jsx)(s.code,{children:'"https://sub.example.com"'})," will be the header. This will also match ",(0,r.jsx)(s.code,{children:"https://sub.sub.example.com"})," and so on, but not ",(0,r.jsx)(s.code,{children:"https://example.com"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Wildcard origin:"})," If ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," is set to ",(0,r.jsx)(s.code,{children:'"*"'}),", the middleware uses that and adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin: *"})," to the response."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["In all cases above, except the ",(0,r.jsx)(s.strong,{children:"Wildcard origin"}),", the middleware will either add the ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin"})," header to the response matching the origin of the incoming request, or it will not add the header at all if the origin is not allowed."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Programmatic origin validation:"}),": The middleware also handles the ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," option, which allows you to programmatically determine if an origin is allowed. If ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," returns ",(0,r.jsx)(s.code,{children:"true"})," for an origin, the middleware sets the ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin"})," header to that origin."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Null origin handling:"})," The middleware accepts the special literal value ",(0,r.jsx)(s.code,{children:'"null"'})," as a valid origin. According to the ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS#origin",children:"CORS specification"}),", browsers send ",(0,r.jsx)(s.code,{children:'"null"'})," as the origin for certain privacy-sensitive contexts, such as:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Requests from sandboxed iframes"}),"\n",(0,r.jsxs)(s.li,{children:["Requests from ",(0,r.jsx)(s.code,{children:"file://"})," URLs"]}),"\n",(0,r.jsxs)(s.li,{children:["Requests from ",(0,r.jsx)(s.code,{children:"data:"})," URLs"]}),"\n",(0,r.jsx)(s.li,{children:"Cross-origin redirects"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["When using ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),", if the function returns ",(0,r.jsx)(s.code,{children:"true"})," for the literal string ",(0,r.jsx)(s.code,{children:'"null"'}),", the middleware will set ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin: null"})," in the response. The ",(0,r.jsx)(s.code,{children:'"null"'})," origin is case-sensitive and must be lowercase."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AllowMethods"})," option controls which HTTP methods are allowed. For example, if ",(0,r.jsx)(s.code,{children:"AllowMethods"})," is set to ",(0,r.jsx)(s.code,{children:'"GET, POST"'}),", the middleware adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Methods: GET, POST"})," to the response."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AllowHeaders"})," option specifies which headers are allowed in the actual request. The middleware sets the Access-Control-Allow-Headers response header to the value of ",(0,r.jsx)(s.code,{children:"AllowHeaders"}),". This informs the client which headers it can use in the actual request."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," option indicates whether the response to the request can be exposed when the credentials flag is true. If ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," is set to ",(0,r.jsx)(s.code,{children:"true"}),", the middleware adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Allow-Credentials: true"})," to the response. To prevent security vulnerabilities, ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," cannot be set to ",(0,r.jsx)(s.code,{children:"true"})," if ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," is set to a wildcard (",(0,r.jsx)(s.code,{children:"*"}),")."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"ExposeHeaders"})," option defines an allowlist of headers that clients are allowed to access. If ",(0,r.jsx)(s.code,{children:"ExposeHeaders"})," is set to ",(0,r.jsx)(s.code,{children:'"X-Custom-Header"'}),", the middleware adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Expose-Headers: X-Custom-Header"})," to the response."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"MaxAge"})," option indicates how long the results of a preflight request can be cached. If ",(0,r.jsx)(s.code,{children:"MaxAge"})," is set to ",(0,r.jsx)(s.code,{children:"3600"}),", the middleware adds the header ",(0,r.jsx)(s.code,{children:"Access-Control-Max-Age: 3600"})," to the response."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"Vary"})," header helps caches store the correct response. For simple requests the middleware sets ",(0,r.jsx)(s.code,{children:"Vary: Origin"})," unless all origins are allowed. Preflight responses add ",(0,r.jsx)(s.code,{children:"Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers"})," (and ",(0,r.jsx)(s.code,{children:"Access-Control-Request-Private-Network"})," when enabled and requested). This ensures caches know when to reuse a response and when to revalidate with the server."]}),"\n",(0,r.jsx)(s.h2,{id:"infrastructure-considerations",children:"Infrastructure Considerations"}),"\n",(0,r.jsx)(s.p,{children:"When deploying Fiber applications behind infrastructure components like CDNs, API gateways, load balancers, or reverse proxies, you have two main options for handling CORS:"}),"\n",(0,r.jsx)(s.h3,{id:"option-1-use-infrastructure-level-cors-recommended",children:"Option 1: Use Infrastructure-Level CORS (Recommended)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"For most production deployments, it is often preferable to handle CORS at the infrastructure level"})," rather than in your Fiber application. This approach offers several advantages:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Better Performance"}),": CORS headers are added at the edge, closer to the client"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reduced Server Load"}),": Preflight requests are handled without reaching your application"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Centralized Configuration"}),": Manage CORS policies alongside other infrastructure settings"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Built-in Caching"}),": Infrastructure providers optimize CORS response caching"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Common infrastructure CORS solutions:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"CDNs"}),": CloudFront, CloudFlare, Azure CDN - handle CORS at edge locations"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"API Gateways"}),": AWS API Gateway, Google Cloud API Gateway - centralized CORS management"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Load Balancers"}),": Application Load Balancers with CORS rules"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reverse Proxies"}),": Nginx, Apache with CORS modules"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["If using infrastructure-level CORS, ",(0,r.jsx)(s.strong,{children:"disable Fiber's CORS middleware"})," to avoid conflicts:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:"// Don't use both - choose one approach\n// app.Use(cors.New()) // Remove this line when using infrastructure CORS\n"})}),"\n",(0,r.jsx)(s.h3,{id:"option-2-application-level-cors-fiber-middleware",children:"Option 2: Application-Level CORS (Fiber Middleware)"}),"\n",(0,r.jsx)(s.p,{children:"Use Fiber's CORS middleware when you need:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Dynamic origin validation"})," based on application logic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fine-grained control"})," over CORS policies per route"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Integration with application state"})," (database-driven origins, etc.)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Development environments"})," where infrastructure CORS isn't available"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["If choosing this approach, ensure that ",(0,r.jsx)(s.strong,{children:"all CORS headers reach your Fiber application unchanged"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"required-headers-for-cors-preflight-requests",children:"Required Headers for CORS Preflight Requests"}),"\n",(0,r.jsxs)(s.p,{children:["For CORS preflight requests to work correctly, these headers ",(0,r.jsx)(s.strong,{children:"must not be stripped or modified by caching layers"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Origin"})," - Required to identify the requesting origin"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Request-Method"})," - Required to identify the HTTP method for the actual request"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Request-Headers"})," - Optional, contains custom headers the actual request will use"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Request-Private-Network"})," - Optional, for private network access requests"]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{title:"Critical Preflight Requirement",type:"warning",children:(0,r.jsxs)(s.p,{children:["If the ",(0,r.jsx)(s.code,{children:"Access-Control-Request-Method"})," header is missing from an OPTIONS request, Fiber will not recognize them as CORS preflight requests. Instead, they'll be treated as regular OPTIONS requests, which typically return ",(0,r.jsx)(s.code,{children:"405 Method Not Allowed"})," since most applications don't define explicit OPTIONS handlers."]})}),"\n",(0,r.jsx)(s.h3,{id:"cors-response-headers-set-by-fiber",children:"CORS Response Headers (Set by Fiber)"}),"\n",(0,r.jsx)(s.p,{children:"The middleware sets these response headers based on your configuration:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"For all CORS requests:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Allow-Origin"}),' - Set to the allowed origin or "*"']}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Allow-Credentials"}),' - Set to "true" when ',(0,r.jsx)(s.code,{children:"AllowCredentials: true"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Expose-Headers"})," - Lists headers the client can access"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Vary"}),' - Set to "Origin" (unless wildcard origins are used)']}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"For preflight responses only:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Allow-Methods"})," - Lists allowed HTTP methods"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Allow-Headers"})," - Lists allowed request headers (or echoes the request)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Max-Age"})," - Cache duration for preflight results (if MaxAge > 0)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Access-Control-Allow-Private-Network"}),' - Set to "true" when private network access is allowed']}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Vary"}),' - Set to "Access-Control-Request-Method, Access-Control-Request-Headers, Origin"']}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"common-infrastructure-issues",children:"Common Infrastructure Issues"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"CDNs (CloudFront, CloudFlare, etc.)"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Configure cache policies to forward all CORS headers"}),"\n",(0,r.jsx)(s.li,{children:"Ensure OPTIONS requests are not cached inappropriately or cache them correctly with proper Vary headers"}),"\n",(0,r.jsx)(s.li,{children:"Don't strip or modify CORS request headers"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"API Gateways"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Choose either gateway-level CORS OR application-level CORS, not both"}),"\n",(0,r.jsx)(s.li,{children:"If using gateway CORS, disable Fiber's CORS middleware"}),"\n",(0,r.jsx)(s.li,{children:"If forwarding to Fiber, ensure all headers pass through unchanged"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Load Balancers/Reverse Proxies"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Preserve all HTTP headers, especially CORS-related ones"}),"\n",(0,r.jsxs)(s.li,{children:["Don't modify or strip ",(0,r.jsx)(s.code,{children:"Origin"}),", ",(0,r.jsx)(s.code,{children:"Access-Control-Request-*"})," headers"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"WAFs/Security Services"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Whitelist CORS headers in security rules"}),"\n",(0,r.jsx)(s.li,{children:"Ensure OPTIONS requests with CORS headers aren't blocked"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"debugging-cors-issues",children:"Debugging CORS Issues"}),"\n",(0,r.jsxs)(s.p,{children:["Add this middleware ",(0,r.jsx)(s.strong,{children:"before"})," your CORS configuration to debug what headers Fiber receives:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'// Debug middleware to log CORS preflight requests\n// Only use in development or testing environments\napp.Use(func(c *fiber.Ctx) error {\n    if c.Method() == "OPTIONS" {\n        fmt.Printf("OPTIONS %s\\n", c.Path())\n        fmt.Printf("  Origin: %s\\n", c.Get("Origin"))\n        fmt.Printf("  Access-Control-Request-Method: %s\\n", c.Get("Access-Control-Request-Method"))\n        fmt.Printf("  Access-Control-Request-Headers: %s\\n", c.Get("Access-Control-Request-Headers"))\n    }\n    return c.Next()\n})\n\napp.Use(cors.New(cors.Config{\n    AllowOrigins: []string{"https://yourdomain.com"},\n    AllowMethods: []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},\n}))\n'})}),"\n",(0,r.jsx)(s.p,{children:"Test CORS preflight directly with curl:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# Test preflight request\ncurl -X OPTIONS https://your-app.com/api/test \\\n  -H "Origin: https://yourdomain.com" \\\n  -H "Access-Control-Request-Method: POST" \\\n  -H "Access-Control-Request-Headers: Content-Type" \\\n  -v\n\n# Test simple CORS request\ncurl -X GET https://your-app.com/api/test \\\n  -H "Origin: https://yourdomain.com" \\\n  -v\n'})}),"\n",(0,r.jsx)(s.h3,{id:"caching-considerations",children:"Caching Considerations"}),"\n",(0,r.jsxs)(s.p,{children:["The middleware sets appropriate ",(0,r.jsx)(s.code,{children:"Vary"})," headers to ensure proper caching:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Non-wildcard origins"}),": ",(0,r.jsx)(s.code,{children:"Vary: Origin"})," is set to cache responses per origin"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Preflight requests"}),": ",(0,r.jsx)(s.code,{children:"Vary: Access-Control-Request-Method, Access-Control-Request-Headers, Origin"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"OPTIONS without preflight headers"}),": ",(0,r.jsx)(s.code,{children:"Vary: Origin"})," to avoid cache poisoning"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Ensure your infrastructure respects these ",(0,r.jsx)(s.code,{children:"Vary"})," headers for correct caching behavior."]}),"\n",(0,r.jsx)(s.h3,{id:"choosing-the-right-approach",children:"Choosing the Right Approach"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Scenario"}),(0,r.jsx)(s.th,{children:"Recommended Approach"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Production with CDN/API Gateway"}),(0,r.jsx)(s.td,{children:"Infrastructure-level CORS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Dynamic origin validation needed"}),(0,r.jsx)(s.td,{children:"Application-level CORS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Microservices with different CORS policies"}),(0,r.jsx)(s.td,{children:"Application-level CORS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Simple static origins"}),(0,r.jsx)(s.td,{children:"Infrastructure-level CORS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Development/testing"}),(0,r.jsx)(s.td,{children:"Application-level CORS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"High traffic applications"}),(0,r.jsx)(s.td,{children:"Infrastructure-level CORS"})]})]})]}),"\n",(0,r.jsxs)(s.admonition,{title:"Infrastructure CORS Configuration",type:"tip",children:[(0,r.jsx)(s.p,{children:"Most cloud providers offer comprehensive CORS documentation:"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/header-caching.html#header-caching-web-cors",children:"AWS CloudFront CORS"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://cloud.google.com/storage/docs/cross-origin",children:"Google Cloud CORS"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.microsoft.com/en-us/azure/cdn/cdn-cors",children:"Azure CDN CORS"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://developers.cloudflare.com/fundamentals/get-started/reference/http-request-headers/#cf-connecting-ip",children:"CloudFlare CORS"})}),"\n"]}),(0,r.jsx)(s.p,{children:"Configure CORS at the infrastructure level when possible for optimal performance and reduced complexity."})]}),"\n",(0,r.jsx)(s.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,r.jsx)(s.p,{children:"When configuring CORS, misconfiguration can potentially expose your application to various security risks. Here are some secure configurations and common pitfalls to avoid:"}),"\n",(0,r.jsx)(s.h3,{id:"secure-configurations",children:"Secure Configurations"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Specify Allowed Origins"}),": Instead of using a wildcard (",(0,r.jsx)(s.code,{children:'"*"'}),"), specify the exact domains allowed to make requests. For example, ",(0,r.jsx)(s.code,{children:'AllowOrigins: "https://www.example.com, https://api.example.com"'})," ensures only these domains can make cross-origin requests to your application."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use Credentials Carefully"}),": If your application needs to support credentials in cross-origin requests, ensure ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," is set to ",(0,r.jsx)(s.code,{children:"true"})," and specify exact origins in ",(0,r.jsx)(s.code,{children:"AllowOrigins"}),". Do not use a wildcard origin in this case."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Limit Exposed Headers"}),": Only allowlist headers that are necessary for the client-side application by setting ",(0,r.jsx)(s.code,{children:"ExposeHeaders"})," appropriately. This minimizes the risk of exposing sensitive information."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Wildcard Origin with Credentials"}),": Setting ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," to ",(0,r.jsx)(s.code,{children:'"*"'})," (a wildcard) and ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," to ",(0,r.jsx)(s.code,{children:"true"})," is a common misconfiguration. This combination is prohibited because it can expose your application to security risks."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Overly Permissive Origins"}),": Specifying too many origins or using overly broad patterns (e.g., ",(0,r.jsx)(s.code,{children:"https://*.example.com"}),") can inadvertently allow malicious sites to interact with your application. Be as specific as possible with allowed origins."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsxs)(s.strong,{children:["Inadequate ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," Validation"]}),": When using ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," for dynamic origin validation, ensure the function includes robust checks to prevent unauthorized origins from being accepted. Overly permissive validation can lead to security vulnerabilities. Never allow ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"})," to return ",(0,r.jsx)(s.code,{children:"true"})," for all origins. This is particularly crucial when ",(0,r.jsx)(s.code,{children:"AllowCredentials"})," is set to ",(0,r.jsx)(s.code,{children:"true"}),". Doing so can bypass the restriction of using a wildcard origin with credentials, exposing your application to serious security threats. If you need to allow wildcard origins, use ",(0,r.jsx)(s.code,{children:"AllowOrigins"})," with a wildcard ",(0,r.jsx)(s.code,{children:'"*"'})," instead of ",(0,r.jsx)(s.code,{children:"AllowOriginsFunc"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Remember, the key to secure CORS configuration is specificity and caution. By carefully selecting which origins, methods, and headers are allowed, you can help protect your application from cross-origin attacks."})]})}function h(e={}){let{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},84429:function(e,s,i){i.d(s,{R:()=>t,x:()=>o});var n=i(96540);let r={},l=n.createContext(r);function t(e){let s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);