"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["2236"],{5933:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>r,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>d,contentTitle:()=>a});var i=JSON.parse('{"id":"aws-ses-sender/README","title":"AWS SES Email Sender","description":"AWS SES-based Golang email delivery service. Provides email dispatch processing, status tracking, scheduled sending, and result analysis capabilities.","source":"@site/docs/recipes/aws-ses-sender/README.md","sourceDirName":"aws-ses-sender","slug":"/aws-ses-sender/","permalink":"/recipes/aws-ses-sender/","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/recipes/edit/master/aws-ses-sender/README.md","tags":[],"version":"current","lastUpdatedAt":1771794478000,"frontMatter":{"title":"AWS SES Email Sender","keywords":["aws","ses","golang","email","sender"],"description":"AWS SES-based Golang email delivery service. Provides email dispatch processing, status tracking, scheduled sending, and result analysis capabilities."},"sidebar":"left_sidebar","previous":{"title":"AWS SAM Container","permalink":"/recipes/aws-sam-container/"},"next":{"title":"Bootstrap","permalink":"/recipes/bootstrap/"}}'),t=s(74848),l=s(84429);let r={title:"AWS SES Email Sender",keywords:["aws","ses","golang","email","sender"],description:"AWS SES-based Golang email delivery service. Provides email dispatch processing, status tracking, scheduled sending, and result analysis capabilities."},a="AWS SES Email Sender",d={},c=[{value:"Features",id:"features",level:2},{value:"Flowchart",id:"flowchart",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Essential Requirements",id:"essential-requirements",level:3},{value:"AWS SES Configuration",id:"aws-ses-configuration",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"Setup",id:"setup",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Installation and Execution",id:"installation-and-execution",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Email Sending Request",id:"email-sending-request",level:3},{value:"View Topic Sending Statistics",id:"view-topic-sending-statistics",level:3},{value:"Email Open Tracking",id:"email-open-tracking",level:3},{value:"View Sending Statistics",id:"view-sending-statistics",level:3},{value:"Receive Sending Results (AWS SNS)",id:"receive-sending-results-aws-sns",level:3}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"aws-ses-email-sender",children:"AWS SES Email Sender"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/gofiber/recipes/tree/master/aws-ses-sender",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/static/v1?label=&message=Github&color=2ea44f&style=for-the-badge&logo=github",alt:"Github"})})," ",(0,t.jsx)(n.a,{href:"https://stackblitz.com/github/gofiber/recipes/tree/master/aws-ses-sender",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/static/v1?label=&message=StackBlitz&color=2ea44f&style=for-the-badge&logo=StackBlitz",alt:"StackBlitz"})})]}),"\n",(0,t.jsxs)(n.p,{children:["This is an AWS SES-based Golang email delivery service that extracts only the basic sending functionality from ",(0,t.jsx)(n.a,{href:"https://github.com/lee-lou2/aws-ses-sender-go",children:"my open-source project"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Email sending using AWS SES"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Designed with daily limits and per-second sending rates in mind"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Scheduled sending and message grouping"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Email open tracking and result collection"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","View daily sending counts and delivery results by message group"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"flowchart",children:"Flowchart"}),"\n",(0,t.jsx)(n.mermaid,{value:"flowchart TD\n    A[Client] --\x3e|Email Send Request| B[API Server]\n    B --\x3e|DB Storage| C[Scheduler]\n    C --\x3e|Query Pending| D[Sender]\n    D --\x3e|SES Send| E[AWS SES]\n    E --\x3e|Email Received| F[Recipient]\n    E --\x3e|SNS Callback| G[API Server]\n    G --\x3e|DB Storage| H[Results/Statistics]\n    F --\x3e|Open Tracking| I[API Server]\n    I --\x3e|DB Storage| J[Open Events]\n    H --\x3e|Stats/Results Query| K[Client]\n    J --\x3e|Stats/Results Query| K[Client]"}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"essential-requirements",children:"Essential Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Go 1.25 or higher"}),"\n",(0,t.jsxs)(n.li,{children:["AWS account and configuration","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"AWS SES service activated"}),"\n",(0,t.jsx)(n.li,{children:"Sender email or domain verification completed"}),"\n",(0,t.jsx)(n.li,{children:"IAM user with SES permissions"}),"\n",(0,t.jsx)(n.li,{children:"AWS Access Key and Secret Key"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"PostgreSQL 14.0 or higher"}),"\n",(0,t.jsx)(n.li,{children:"(Optional) Docker"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"aws-ses-configuration",children:"AWS SES Configuration"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Verify sender email/domain in AWS SES console"}),"\n",(0,t.jsx)(n.li,{children:"Request removal from SES sandbox mode (for production)"}),"\n",(0,t.jsx)(n.li,{children:"Create SNS topic and set up SES feedback notifications"}),"\n",(0,t.jsx)(n.li,{children:"Grant following permissions to IAM user"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ses:SendEmail"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ses:SendRawEmail"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sns:Publish"})," (if using SNS for delivery notifications)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sns:Subscribe"})," (if using SNS for delivery notifications)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"aws-ses-sender/\n\u251C\u2500\u2500 main.go              # Application entry point\n\u251C\u2500\u2500 api/                 # HTTP API related code\n\u2502   \u251C\u2500\u2500 handler.go       # API handler functions\n\u2502   \u251C\u2500\u2500 route.go         # API routing configuration\n\u2502   \u251C\u2500\u2500 server.go        # HTTP server setup/execution\n\u2502   \u2514\u2500\u2500 middlewares.go   # API authentication middleware\n\u251C\u2500\u2500 cmd/                 # Background job code\n\u2502   \u251C\u2500\u2500 scheduler.go     # Pending email scheduler\n\u2502   \u2514\u2500\u2500 sender.go        # SES email sending processor\n\u251C\u2500\u2500 config/              # Application settings\n\u2502   \u251C\u2500\u2500 env.go           # Environment variable management\n\u2502   \u2514\u2500\u2500 db.go            # Database connection settings\n\u251C\u2500\u2500 model/               # Database models\n\u2502   \u2514\u2500\u2500 email.go         # GORM model definitions\n\u2514\u2500\u2500 pkg/aws/             # AWS service integration\n    \u2514\u2500\u2500 ses.go           # SES email sending\n"})}),"\n",(0,t.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Go language development environment"}),"\n",(0,t.jsxs)(n.li,{children:["AWS account and SES service configuration","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sender email/domain verification"}),"\n",(0,t.jsx)(n.li,{children:"IAM user creation with SES permissions"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"PostgreSQL database"}),"\n",(0,t.jsx)(n.li,{children:"(Optional) Sentry DSN"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:".env"})," file in the project root and set the following environment variables:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-env",children:"# AWS Related\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_REGION=ap-northeast-2\nEMAIL_SENDER=sender@example.com\n\n# Server and API\nSERVER_PORT=3000\nAPI_KEY=your_api_key\nSERVER_HOST=http://localhost:3000\n\n# Database (PostgreSQL)\nDB_HOST=localhost\nDB_PORT=5432\nDB_USER=postgres\nDB_PASSWORD=postgres\nDB_NAME=postgres\n\n# Sending rate per second\nEMAIL_RATE=14\n\n# Sentry (Optional)\nSENTRY_DSN=your_sentry_dsn\n"})}),"\n",(0,t.jsx)(n.h3,{id:"installation-and-execution",children:"Installation and Execution"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone <repository_URL>\ncd aws-ses-sender\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go mod tidy\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run application:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go run main.go\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,t.jsx)(n.h3,{id:"email-sending-request",children:"Email Sending Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /v1/messages\n"})}),"\n",(0,t.jsx)(n.p,{children:"Request body example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "messages": [\n    {\n      "topicId": "promotion-event-2024",\n      "emails": ["recipient1@example.com", "recipient2@example.com"],\n      "subject": "Special Promotion Notice",\n      "content": "<h1>Hello!</h1><p>Check out our special promotion details.</p>",\n      "scheduledAt": "2024-12-25T10:00:00+09:00"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"view-topic-sending-statistics",children:"View Topic Sending Statistics"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /v1/topics/:topicId\n"})}),"\n",(0,t.jsx)(n.h3,{id:"email-open-tracking",children:"Email Open Tracking"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /v1/events/open?requestId={requestId}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"view-sending-statistics",children:"View Sending Statistics"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /v1/events/counts/sent?hours={hours}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"receive-sending-results-aws-sns",children:"Receive Sending Results (AWS SNS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /v1/events/results\n"})})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},84429:function(e,n,s){s.d(n,{R:()=>r,x:()=>a});var i=s(96540);let t={},l=i.createContext(t);function r(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);