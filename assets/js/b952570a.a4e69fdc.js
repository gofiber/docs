"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["36093"],{57647:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>c,toc:()=>a,default:()=>h,metadata:()=>r,assets:()=>s,contentTitle:()=>o});var r=JSON.parse('{"id":"middleware/adaptor","title":"Adaptor","description":"The adaptor package converts between Fiber and net/http, letting you reuse handlers, middleware, and requests across both frameworks.","source":"@site/versioned_docs/version-v3.x/middleware/adaptor.md","sourceDirName":"middleware","slug":"/middleware/adaptor","permalink":"/middleware/adaptor","draft":false,"unlisted":false,"tags":[],"version":"v3.x","lastUpdatedAt":1771794478000,"frontMatter":{"id":"adaptor"},"sidebar":"left_sidebar","previous":{"title":"\u{1F9EC} Middleware","permalink":"/category/-middleware"},"next":{"title":"BasicAuth","permalink":"/middleware/basicauth"}}'),d=t(74848),i=t(84429);let c={id:"adaptor"},o="Adaptor",s={},a=[{value:"Features",id:"features",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"1. Using <code>net/http</code> handlers in Fiber (<code>HTTPHandler</code>, <code>HTTPHandlerFunc</code>)",id:"1-using-nethttp-handlers-in-fiber-httphandler-httphandlerfunc",level:3},{value:"2. Using <code>net/http</code> middleware with Fiber (<code>HTTPMiddleware</code>)",id:"2-using-nethttp-middleware-with-fiber-httpmiddleware",level:3},{value:"3. Using Fiber handlers in <code>net/http</code> (<code>FiberHandler</code>)",id:"3-using-fiber-handlers-in-nethttp-fiberhandler",level:3},{value:"4. Converting Fiber handlers to <code>http.HandlerFunc</code> (<code>FiberHandlerFunc</code>)",id:"4-converting-fiber-handlers-to-httphandlerfunc-fiberhandlerfunc",level:3},{value:"5. Running a full Fiber app inside <code>net/http</code> (<code>FiberApp</code>)",id:"5-running-a-full-fiber-app-inside-nethttp-fiberapp",level:3},{value:"6. Converting <code>fiber.Ctx</code> to <code>*http.Request</code> (<code>ConvertRequest</code>)",id:"6-converting-fiberctx-to-httprequest-convertrequest",level:3},{value:"7. Passing Fiber user context into <code>net/http</code>",id:"7-passing-fiber-user-context-into-nethttp",level:3},{value:"8. Copying context values onto <code>fasthttp.RequestCtx</code> (<code>CopyContextToFiberContext</code>)",id:"8-copying-context-values-onto-fasthttprequestctx-copycontexttofibercontext",level:3},{value:"Summary",id:"summary",level:2}];function l(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"adaptor",children:"Adaptor"})}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"adaptor"})," package converts between Fiber and ",(0,d.jsx)(n.code,{children:"net/http"}),", letting you reuse handlers, middleware, and requests across both frameworks."]}),"\n",(0,d.jsx)(n.admonition,{type:"tip",children:(0,d.jsxs)(n.p,{children:["Fiber can register plain ",(0,d.jsx)(n.code,{children:"net/http"})," handlers directly\u2014just pass an ",(0,d.jsx)(n.code,{children:"http.Handler"}),",\n",(0,d.jsx)(n.code,{children:"http.HandlerFunc"}),", or ",(0,d.jsx)(n.code,{children:"func(http.ResponseWriter, *http.Request)"})," to any router\nmethod and it will be adapted automatically. The adaptor helpers remain valuable\nwhen you need to convert middleware, swap handler directions, or transform\nrequests explicitly."]})}),"\n",(0,d.jsx)(n.admonition,{title:"Fiber features are unavailable",type:"caution",children:(0,d.jsxs)(n.p,{children:["Even when you register them directly, adapted ",(0,d.jsx)(n.code,{children:"net/http"})," handlers still run with standard\nlibrary semantics. They don't have access to ",(0,d.jsx)(n.code,{children:"fiber.Ctx"}),", and the compatibility layer comes\nwith additional overhead compared to native Fiber handlers. Use them for interop and legacy\nscenarios, but prefer Fiber handlers when performance or Fiber-specific APIs matter."]})}),"\n",(0,d.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Convert ",(0,d.jsx)(n.code,{children:"net/http"})," handlers and middleware to Fiber handlers"]}),"\n",(0,d.jsxs)(n.li,{children:["Convert Fiber handlers to ",(0,d.jsx)(n.code,{children:"net/http"})," handlers"]}),"\n",(0,d.jsxs)(n.li,{children:["Convert a Fiber context (",(0,d.jsx)(n.code,{children:"fiber.Ctx"}),") into an ",(0,d.jsx)(n.code,{children:"http.Request"})]}),"\n",(0,d.jsxs)(n.li,{children:["Copy values stored in a ",(0,d.jsx)(n.code,{children:"context.Context"})," onto a ",(0,d.jsx)(n.code,{children:"fasthttp.RequestCtx"})]}),"\n"]}),"\n",(0,d.jsx)(n.admonition,{title:"Body size limits when running Fiber from net/http",type:"note",children:(0,d.jsxs)(n.p,{children:["When Fiber is executed from a ",(0,d.jsx)(n.code,{children:"net/http"})," server through ",(0,d.jsx)(n.code,{children:"FiberHandler"}),", ",(0,d.jsx)(n.code,{children:"FiberHandlerFunc"}),",\nor ",(0,d.jsx)(n.code,{children:"FiberApp"}),", the adaptor enforces the app's configured ",(0,d.jsx)(n.code,{children:"BodyLimit"}),". The app's ",(0,d.jsx)(n.code,{children:"BodyLimit"})," defaults to ",(0,d.jsx)(n.strong,{children:"4 MiB"})," if a non-positive value is provided during configuration. Requests exceeding the active limit receive ",(0,d.jsx)(n.code,{children:"413 Request Entity Too Large"}),"."]})}),"\n",(0,d.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Signature"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandler"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandler(h http.Handler) fiber.Handler"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"http.Handler"})," to ",(0,d.jsx)(n.code,{children:"fiber.Handler"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandlerWithContext"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandlerWithContext(h http.Handler) fiber.Handler"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"http.Handler"})," to ",(0,d.jsx)(n.code,{children:"fiber.Handler"}),", propagating Fiber's local context"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandlerFunc"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPHandlerFunc(h http.HandlerFunc) fiber.Handler"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"http.HandlerFunc"})," to ",(0,d.jsx)(n.code,{children:"fiber.Handler"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPMiddleware"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HTTPMiddleware(mw func(http.Handler) http.Handler) fiber.Handler"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"http.Handler"})," middleware to ",(0,d.jsx)(n.code,{children:"fiber.Handler"})," middleware"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberHandler"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberHandler(h fiber.Handler) http.Handler"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"fiber.Handler"})," to ",(0,d.jsx)(n.code,{children:"http.Handler"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberHandlerFunc"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberHandlerFunc(h fiber.Handler) http.HandlerFunc"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"fiber.Handler"})," to ",(0,d.jsx)(n.code,{children:"http.HandlerFunc"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberApp"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FiberApp(app *fiber.App) http.HandlerFunc"})}),(0,d.jsxs)(n.td,{children:["Converts an entire Fiber app to a ",(0,d.jsx)(n.code,{children:"http.HandlerFunc"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ConvertRequest"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ConvertRequest(c fiber.Ctx, forServer bool) (*http.Request, error)"})}),(0,d.jsxs)(n.td,{children:["Converts ",(0,d.jsx)(n.code,{children:"fiber.Ctx"})," into a ",(0,d.jsx)(n.code,{children:"http.Request"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LocalContextFromHTTPRequest"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LocalContextFromHTTPRequest(r *http.Request) (context.Context, bool)"})}),(0,d.jsxs)(n.td,{children:["Extracts the propagated ",(0,d.jsx)(n.code,{children:"context.Context"})," from an adapted ",(0,d.jsx)(n.code,{children:"http.Request"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CopyContextToFiberContext"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CopyContextToFiberContext(context any, requestContext *fasthttp.RequestCtx)"})}),(0,d.jsxs)(n.td,{children:["Copies ",(0,d.jsx)(n.code,{children:"context.Context"})," to ",(0,d.jsx)(n.code,{children:"fasthttp.RequestCtx"})]})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,d.jsxs)(n.h3,{id:"1-using-nethttp-handlers-in-fiber-httphandler-httphandlerfunc",children:["1. Using ",(0,d.jsx)(n.code,{children:"net/http"})," handlers in Fiber (",(0,d.jsx)(n.code,{children:"HTTPHandler"}),", ",(0,d.jsx)(n.code,{children:"HTTPHandlerFunc"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["Run standard ",(0,d.jsx)(n.code,{children:"net/http"})," handlers inside Fiber. Fiber can auto-adapt them, or you can\nexplicitly convert them when you want to cache or share the converted handler."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    app := fiber.New()\n\n    // Fiber adapts net/http handlers for you during registration.\n    app.Get("/", http.HandlerFunc(helloHandler))\n\n    // You can also convert and reuse the handler manually.\n    cached := adaptor.HTTPHandler(http.HandlerFunc(helloHandler))\n    app.Get("/cached", cached)\n\n    // When you already have an http.HandlerFunc, convert it directly.\n    app.Get("/func", adaptor.HTTPHandlerFunc(helloHandler))\n\n    app.Listen(":3000")\n}\n\nfunc helloHandler(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprint(w, "Hello from net/http!")\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"2-using-nethttp-middleware-with-fiber-httpmiddleware",children:["2. Using ",(0,d.jsx)(n.code,{children:"net/http"})," middleware with Fiber (",(0,d.jsx)(n.code,{children:"HTTPMiddleware"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["Middleware written for ",(0,d.jsx)(n.code,{children:"net/http"})," can run inside Fiber:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "log"\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    app := fiber.New()\n\n    // Apply an http middleware in Fiber\n    app.Use(adaptor.HTTPMiddleware(loggingMiddleware))\n\n    app.Get("/", func(c fiber.Ctx) error {\n        return c.SendString("Hello Fiber!")\n    })\n\n    app.Listen(":3000")\n}\n\nfunc loggingMiddleware(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        log.Println("Request received")\n        next.ServeHTTP(w, r)\n    })\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"3-using-fiber-handlers-in-nethttp-fiberhandler",children:["3. Using Fiber handlers in ",(0,d.jsx)(n.code,{children:"net/http"})," (",(0,d.jsx)(n.code,{children:"FiberHandler"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["You can use Fiber handlers from ",(0,d.jsx)(n.code,{children:"net/http"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    // Convert a Fiber handler to an http.Handler\n    http.Handle("/", adaptor.FiberHandler(helloFiber))\n    \n    // Convert a Fiber handler to an http.HandlerFunc\n    http.HandleFunc("/func", adaptor.FiberHandlerFunc(helloFiber))\n    \n    http.ListenAndServe(":3000", nil)\n}\n\nfunc helloFiber(c fiber.Ctx) error {\n    return c.SendString("Hello from Fiber!")\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"4-converting-fiber-handlers-to-httphandlerfunc-fiberhandlerfunc",children:["4. Converting Fiber handlers to ",(0,d.jsx)(n.code,{children:"http.HandlerFunc"})," (",(0,d.jsx)(n.code,{children:"FiberHandlerFunc"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["When you specifically need an ",(0,d.jsx)(n.code,{children:"http.HandlerFunc"}),", wrap the Fiber handler directly:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    http.HandleFunc("/func-only", adaptor.FiberHandlerFunc(helloFiber))\n    http.ListenAndServe(":3000", nil)\n}\n\nfunc helloFiber(c fiber.Ctx) error {\n    return c.SendString("Hello from Fiber!")\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"5-running-a-full-fiber-app-inside-nethttp-fiberapp",children:["5. Running a full Fiber app inside ",(0,d.jsx)(n.code,{children:"net/http"})," (",(0,d.jsx)(n.code,{children:"FiberApp"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["You can wrap a full Fiber app inside ",(0,d.jsx)(n.code,{children:"net/http"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    app := fiber.New()\n    app.Get("/", func(c fiber.Ctx) error {\n        return c.SendString("Hello from Fiber!")\n    })\n\n    // Run Fiber inside an http server\n    http.ListenAndServe(":3000", adaptor.FiberApp(app))\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"6-converting-fiberctx-to-httprequest-convertrequest",children:["6. Converting ",(0,d.jsx)(n.code,{children:"fiber.Ctx"})," to ",(0,d.jsx)(n.code,{children:"*http.Request"})," (",(0,d.jsx)(n.code,{children:"ConvertRequest"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:["Create an ",(0,d.jsx)(n.code,{children:"*http.Request"})," from a ",(0,d.jsx)(n.code,{children:"fiber.Ctx"}),". The ",(0,d.jsx)(n.code,{children:"forServer"})," parameter determines how\nserver-oriented fields are populated:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"forServer = true"})," when the converted request will be passed into a ",(0,d.jsx)(n.code,{children:"net/http"})," handler\n(sets ",(0,d.jsx)(n.code,{children:"RequestURI"}),", ",(0,d.jsx)(n.code,{children:"RemoteAddr"}),", and ",(0,d.jsx)(n.code,{children:"TLS"})," fields for server-side handling)"]}),"\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"forServer = false"})," when creating a request for client-side use (e.g., making an\noutbound HTTP request with ",(0,d.jsx)(n.code,{children:"http.Client"}),")"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "net/http"\n    "net/http/httptest"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\nfunc main() {\n    app := fiber.New()\n    app.Get("/request", handleRequest)\n    app.Listen(":3000")\n}\n\nfunc handleRequest(c fiber.Ctx) error {\n    // Use forServer = true when passing to a net/http handler\n    httpReq, err := adaptor.ConvertRequest(c, true)\n    if err != nil {\n        return err\n    }\n\n    // Pass the request to a net/http handler.\n    recorder := httptest.NewRecorder()\n    http.DefaultServeMux.ServeHTTP(recorder, httpReq)\n\n    return c.SendString("Converted Request URL: " + httpReq.URL.String())\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"7-passing-fiber-user-context-into-nethttp",children:["7. Passing Fiber user context into ",(0,d.jsx)(n.code,{children:"net/http"})]}),"\n",(0,d.jsxs)(n.p,{children:["This example shows a realistic flow: a Fiber middleware sets a request-scoped ",(0,d.jsx)(n.code,{children:"context.Context"})," (with a ",(0,d.jsx)(n.code,{children:"request_id"}),") on the Fiber context, then an adapted ",(0,d.jsx)(n.code,{children:"net/http"})," handler retrieves it via ",(0,d.jsx)(n.code,{children:"LocalContextFromHTTPRequest"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "fmt"\n    "net/http"\n\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\ntype ctxKey string\nconst requestIDKey ctxKey = "request_id"\n\nfunc main() {\n    app := fiber.New()\n\n    // Create a request-scoped context in Fiber (e.g., request id, auth claims, trace span).\n    app.Use(func(c fiber.Ctx) error {\n        reqID := c.Get("X-Request-ID")\n\n        ctx := context.WithValue(context.Background(), requestIDKey, reqID)\n\n        // Fiber stores request-scoped context as "user context".\n        c.SetContext(ctx)\n        return c.Next()\n    })\n\n    // 2) Run a standard net/http handler that includes Fiber\'s user context propagated.\n    app.Get("/hello", adaptor.HTTPHandlerWithContext(http.HandlerFunc(handleRequest)))\n\n    app.Listen(":3000")\n}\n\nfunc handleRequest(w http.ResponseWriter, r *http.Request) {\n    ctx, ok := adaptor.LocalContextFromHTTPRequest(r)\n    if !ok || ctx == nil {\n        http.Error(w, "missing propagated context", http.StatusInternalServerError)\n        return\n    }\n\n    reqID, _ := ctx.Value(requestIDKey).(string)\n    fmt.Fprintf(w, "Hello from net/http (request_id=%s)\\n", reqID)\n}\n'})}),"\n",(0,d.jsxs)(n.h3,{id:"8-copying-context-values-onto-fasthttprequestctx-copycontexttofibercontext",children:["8. Copying context values onto ",(0,d.jsx)(n.code,{children:"fasthttp.RequestCtx"})," (",(0,d.jsx)(n.code,{children:"CopyContextToFiberContext"}),")"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CopyContextToFiberContext"})," copies values stored in a ",(0,d.jsx)(n.code,{children:"context.Context"})," onto a\n",(0,d.jsx)(n.code,{children:"fasthttp.RequestCtx"}),". The function is marked deprecated in code because it uses\nreflection and unsafe operations\u2014prefer explicit parameter passing when possible.\nWhen you do need it, call it immediately after you add values to the ",(0,d.jsx)(n.code,{children:"net/http"}),"\ncontext so Fiber can read them via ",(0,d.jsx)(n.code,{children:"c.Context()"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "net/http"\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/adaptor"\n)\n\ntype contextKey string\n\nfunc main() {\n    app := fiber.New()\n\n    app.Use(func(c fiber.Ctx) error {\n        // Convert the Fiber context to an http.Request so we can attach context values.\n        httpReq, err := adaptor.ConvertRequest(c, true)\n        if err != nil {\n            return err\n        }\n\n        // Add context data and push it back to the Fiber context.\n        enriched := httpReq.WithContext(context.WithValue(httpReq.Context(), contextKey("requestID"), "req-123"))\n        adaptor.CopyContextToFiberContext(enriched.Context(), c.RequestCtx())\n\n        return c.Next()\n    })\n\n    app.Get("/", func(c fiber.Ctx) error {\n        if id, ok := c.Context().Value(contextKey("requestID")).(string); ok {\n            return c.SendString("Request ID: " + id)\n        }\n        return c.SendStatus(fiber.StatusNotFound)\n    })\n\n    app.Listen(":3000")\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"adaptor"})," package lets Fiber and ",(0,d.jsx)(n.code,{children:"net/http"})," interoperate so you can:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Convert handlers and middleware in both directions"}),"\n",(0,d.jsxs)(n.li,{children:["Run Fiber apps inside ",(0,d.jsx)(n.code,{children:"net/http"})]}),"\n",(0,d.jsxs)(n.li,{children:["Convert ",(0,d.jsx)(n.code,{children:"fiber.Ctx"})," to ",(0,d.jsx)(n.code,{children:"http.Request"})]}),"\n",(0,d.jsxs)(n.li,{children:["Propagate Fiber's user context into adapted ",(0,d.jsx)(n.code,{children:"net/http"})," handlers"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"This makes it straightforward to integrate Fiber with existing Go projects or migrate between frameworks."})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},84429:function(e,n,t){t.d(n,{R:()=>c,x:()=>o});var r=t(96540);let d={},i=r.createContext(d);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);