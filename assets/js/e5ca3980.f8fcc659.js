"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["84214"],{56762:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>d,toc:()=>c,default:()=>o,metadata:()=>s,assets:()=>a,contentTitle:()=>l});var s=JSON.parse('{"id":"middleware/basicauth","title":"BasicAuth","description":"Basic Authentication middleware for Fiber that provides HTTP basic auth. It calls the next handler for valid credentials and returns 401 Unauthorized for missing or invalid credentials, 400 Bad Request for malformed Authorization headers, or 431 Request Header Fields Too Large when the header exceeds size limits. Credentials may omit Base64 padding as permitted by RFC 7235\'s token68 syntax.","source":"@site/docs/core/middleware/basicauth.md","sourceDirName":"middleware","slug":"/middleware/basicauth","permalink":"/next/middleware/basicauth","draft":false,"unlisted":false,"editUrl":"https://github.com/gofiber/fiber/edit/main/docs/middleware/basicauth.md","tags":[],"version":"current","lastUpdatedAt":1771794478000,"frontMatter":{"id":"basicauth"},"sidebar":"left_sidebar","previous":{"title":"Adaptor","permalink":"/next/middleware/adaptor"},"next":{"title":"Cache","permalink":"/next/middleware/cache"}}'),i=n(74848),r=n(84429);let d={id:"basicauth"},l="BasicAuth",a={},c=[{value:"Signatures",id:"signatures",level:2},{value:"Examples",id:"examples",level:2},{value:"Password hashes",id:"password-hashes",level:3},{value:"Generating SHA-256 and SHA-512 passwords",id:"generating-sha-256-and-sha-512-passwords",level:4},{value:"Config",id:"config",level:2},{value:"Default Config",id:"default-config",level:2}];function h(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"basicauth",children:"BasicAuth"})}),"\n",(0,i.jsxs)(t.p,{children:["Basic Authentication middleware for ",(0,i.jsx)(t.a,{href:"https://github.com/gofiber/fiber",children:"Fiber"})," that provides HTTP basic auth. It calls the next handler for valid credentials and returns ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401",children:(0,i.jsx)(t.code,{children:"401 Unauthorized"})})," for missing or invalid credentials, ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400",children:(0,i.jsx)(t.code,{children:"400 Bad Request"})})," for malformed ",(0,i.jsx)(t.code,{children:"Authorization"})," headers, or ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/431",children:(0,i.jsx)(t.code,{children:"431 Request Header Fields Too Large"})})," when the header exceeds size limits. Credentials may omit Base64 padding as permitted by RFC 7235's ",(0,i.jsx)(t.code,{children:"token68"})," syntax."]}),"\n",(0,i.jsxs)(t.p,{children:["The default unauthorized response includes the header ",(0,i.jsx)(t.code,{children:'WWW-Authenticate: Basic realm="Restricted", charset="UTF-8"'}),", sets ",(0,i.jsx)(t.code,{children:"Cache-Control: no-store"}),", and adds a ",(0,i.jsx)(t.code,{children:"Vary: Authorization"})," header. Only the ",(0,i.jsx)(t.code,{children:"UTF-8"})," charset is supported; any other value will panic."]}),"\n",(0,i.jsx)(t.h2,{id:"signatures",children:"Signatures"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:"func New(config Config) fiber.Handler\nfunc UsernameFromContext(c fiber.Ctx) string\n"})}),"\n",(0,i.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(t.p,{children:"Import the middleware package:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:'import (\n    "github.com/gofiber/fiber/v3"\n    "github.com/gofiber/fiber/v3/middleware/basicauth"\n)\n'})}),"\n",(0,i.jsx)(t.p,{children:"Once your Fiber app is initialized, choose one of the following approaches:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:'// Provide a minimal config\napp.Use(basicauth.New(basicauth.Config{\n    Users: map[string]string{\n        // "doe" hashed using SHA-256\n        "john":  "{SHA256}eZ75KhGvkY4/t0HfQpNPO1aO0tk6wd908bjUGieTKm8=",\n        // "123456" hashed using bcrypt\n        "admin": "$2a$10$gTYwCN66/tBRoCr3.TXa1.v1iyvwIF7GRBqxzv7G.AHLMt/owXrp.",\n    },\n}))\n\n// Or extend your config for customization\napp.Use(basicauth.New(basicauth.Config{\n    Users: map[string]string{\n        // "doe" hashed using SHA-256\n        "john":  "{SHA256}eZ75KhGvkY4/t0HfQpNPO1aO0tk6wd908bjUGieTKm8=",\n        // "123456" hashed using bcrypt\n        "admin": "$2a$10$gTYwCN66/tBRoCr3.TXa1.v1iyvwIF7GRBqxzv7G.AHLMt/owXrp.",\n    },\n    Realm: "Forbidden",\n    Authorizer: func(user, pass string, c fiber.Ctx) bool {\n        // custom validation logic\n        return (user == "john" || user == "admin")\n    },\n    Unauthorized: func(c fiber.Ctx) error {\n        return c.SendFile("./unauthorized.html")\n    },\n}))\n'})}),"\n",(0,i.jsx)(t.h3,{id:"password-hashes",children:"Password hashes"}),"\n",(0,i.jsx)(t.p,{children:"Passwords must be supplied in pre-hashed form. The middleware detects the\nhashing algorithm from a prefix:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:'"{SHA512}"'})," or ",(0,i.jsx)(t.code,{children:'"{SHA256}"'})," followed by a base64-encoded digest"]}),"\n",(0,i.jsxs)(t.li,{children:["standard bcrypt strings beginning with ",(0,i.jsx)(t.code,{children:"$2"})]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"If no prefix is present, the value is interpreted as a SHA-256 digest encoded in\nhex or base64. Plaintext passwords are rejected."}),"\n",(0,i.jsx)(t.h4,{id:"generating-sha-256-and-sha-512-passwords",children:"Generating SHA-256 and SHA-512 passwords"}),"\n",(0,i.jsxs)(t.p,{children:["Create a digest, encode it in base64, and prefix it with ",(0,i.jsx)(t.code,{children:"{SHA256}"})," or\n",(0,i.jsx)(t.code,{children:"{SHA512}"})," before adding it to ",(0,i.jsx)(t.code,{children:"Users"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# SHA-256\nprintf 'secret' | openssl dgst -binary -sha256 | base64\n\n# SHA-512\nprintf 'secret' | openssl dgst -binary -sha512 | base64\n"})}),"\n",(0,i.jsx)(t.p,{children:"Include the prefix in your config:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:'Users: map[string]string{\n    "john":  "{SHA256}K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",\n    "admin": "{SHA512}vSsar3708Jvp9Szi2NWZZ02Bqp1qRCFpbcTZPdBhnWgs5WtNZKnvCXdhztmeD2cmW192CF5bDufKRpayrW/isg==",\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"config",children:"Config"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Next"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"func(fiber.Ctx) bool"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Next defines a function to skip this middleware when it returns true."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"nil"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Users"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"map[string]string"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Users maps usernames to ",(0,i.jsx)(t.strong,{children:"hashed"})," passwords (e.g. bcrypt, ",(0,i.jsx)(t.code,{children:"{SHA256}"}),")."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"map[string]string{}"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Realm"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"string"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Realm is a string to define the realm attribute of BasicAuth. The realm identifies the system to authenticate against and can be used by clients to save credentials."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'"Restricted"'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Charset"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"string"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Charset sent in the ",(0,i.jsx)(t.code,{children:"WWW-Authenticate"})," header. Only ",(0,i.jsx)(t.code,{children:'"UTF-8"'})," is supported (case-insensitive)."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'"UTF-8"'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"HeaderLimit"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"int"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Maximum allowed length of the ",(0,i.jsx)(t.code,{children:"Authorization"})," header. Requests exceeding this limit are rejected."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"8192"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Authorizer"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"func(string, string, fiber.Ctx) bool"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Authorizer defines a function to check the credentials. It will be called with a username, password, and the current context and is expected to return true or false to indicate approval."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"nil"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Unauthorized"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"fiber.Handler"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Unauthorized defines the response body for unauthorized responses."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"nil"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"BadRequest"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"fiber.Handler"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["BadRequest defines the response for malformed ",(0,i.jsx)(t.code,{children:"Authorization"})," headers."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"nil"})})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"default-config",children:"Default Config"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:'var ConfigDefault = Config{\n    Next:            nil,\n    Users:           map[string]string{},\n    Realm:           "Restricted",\n    Charset:         "UTF-8",\n    HeaderLimit:     8192,\n    Authorizer:      nil,\n    Unauthorized:    nil,\n    BadRequest:      nil,\n}\n'})})]})}function o(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},84429:function(e,t,n){n.d(t,{R:()=>d,x:()=>l});var s=n(96540);let i={},r=s.createContext(i);function d(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);