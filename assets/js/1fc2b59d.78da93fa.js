"use strict";(self.webpackChunkfiber_docs=self.webpackChunkfiber_docs||[]).push([["37770"],{94365:function(e,o,n){n.r(o),n.d(o,{frontMatter:()=>i,toc:()=>a,default:()=>c,metadata:()=>l,assets:()=>s,contentTitle:()=>g});var l=JSON.parse('{"id":"api/log","title":"\u{1F4C3} Log","description":"Fiber\'s built-in log package","source":"@site/versioned_docs/version-v3.x/api/log.md","sourceDirName":"api","slug":"/api/log","permalink":"/api/log","draft":false,"unlisted":false,"tags":[],"version":"v3.x","lastUpdatedAt":1771794478000,"sidebarPosition":6,"frontMatter":{"id":"log","title":"\u{1F4C3} Log","description":"Fiber\'s built-in log package","sidebar_position":6},"sidebar":"left_sidebar","previous":{"title":"\u{1F504} Redirect","permalink":"/api/redirect"},"next":{"title":"\u{1F3A3} Hooks","permalink":"/api/hooks"}}'),t=n(74848),r=n(84429);let i={id:"log",title:"\u{1F4C3} Log",description:"Fiber's built-in log package",sidebar_position:6},g,s={},a=[{value:"Log Levels",id:"log-levels",level:2},{value:"Custom Log",id:"custom-log",level:2},{value:"Print Log",id:"print-log",level:2},{value:"Basic Logging",id:"basic-logging",level:3},{value:"Formatted Logging",id:"formatted-logging",level:3},{value:"Key-Value Logging",id:"key-value-logging",level:3},{value:"Global Log",id:"global-log",level:2},{value:"Set Level",id:"set-level",level:2},{value:"Set Output",id:"set-output",level:2},{value:"Writing Logs to Stderr",id:"writing-logs-to-stderr",level:3},{value:"Writing Logs to a File",id:"writing-logs-to-a-file",level:3},{value:"Writing Logs to Both Console and File",id:"writing-logs-to-both-console-and-file",level:3},{value:"Bind Context",id:"bind-context",level:2},{value:"Logger",id:"logger",level:2}];function d(e){let o={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"Logs help you observe program behavior, diagnose issues, and trigger alerts. Structured logs improve searchability and speed up troubleshooting."}),"\n",(0,t.jsxs)(o.p,{children:["Fiber logs to standard output by default and exposes global helpers such as ",(0,t.jsx)(o.code,{children:"log.Info"}),", ",(0,t.jsx)(o.code,{children:"log.Errorf"}),", and ",(0,t.jsx)(o.code,{children:"log.Warnw"}),"."]}),"\n",(0,t.jsx)(o.h2,{id:"log-levels",children:"Log Levels"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:"const (\n    LevelTrace Level = iota\n    LevelDebug\n    LevelInfo\n    LevelWarn\n    LevelError\n    LevelFatal\n    LevelPanic\n)\n"})}),"\n",(0,t.jsx)(o.h2,{id:"custom-log",children:"Custom Log"}),"\n",(0,t.jsxs)(o.p,{children:["Fiber provides the generic ",(0,t.jsx)(o.code,{children:"AllLogger[T]"})," interface for adapting various log libraries."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:"type CommonLogger interface {\n    Logger\n    FormatLogger\n    WithLogger\n}\n\ntype ConfigurableLogger[T any] interface {\n    // SetLevel sets logging level.\n    SetLevel(level Level)\n\n    // SetOutput sets the logger output.\n    SetOutput(w io.Writer)\n\n    // Logger returns the logger instance.\n    Logger() T\n}\n\ntype AllLogger[T any] interface {\n    CommonLogger\n    ConfigurableLogger[T]\n    WithLogger\n}\n"})}),"\n",(0,t.jsx)(o.h2,{id:"print-log",children:"Print Log"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Note:"})," The Fatal level method will terminate the program after printing the log message. Please use it with caution."]}),"\n",(0,t.jsx)(o.h3,{id:"basic-logging",children:"Basic Logging"}),"\n",(0,t.jsxs)(o.p,{children:["Call level-specific methods directly; entries use the ",(0,t.jsx)(o.code,{children:"messageKey"})," (default ",(0,t.jsx)(o.code,{children:"msg"}),")."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'log.Info("Hello, World!")\nlog.Debug("Are you OK?")\nlog.Info("42 is the answer to life, the universe, and everything")\nlog.Warn("We are under attack!")\nlog.Error("Houston, we have a problem.")\nlog.Fatal("So Long, and Thanks for All the Fish.")\nlog.Panic("The system is down.")\n'})}),"\n",(0,t.jsx)(o.h3,{id:"formatted-logging",children:"Formatted Logging"}),"\n",(0,t.jsxs)(o.p,{children:["Append ",(0,t.jsx)(o.code,{children:"f"})," to format the message."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'log.Debugf("Hello %s", "boy")\nlog.Infof("%d is the answer to life, the universe, and everything", 42)\nlog.Warnf("We are under attack, %s!", "boss")\nlog.Errorf("%s, we have a problem.", "John Smith")\nlog.Fatalf("So Long, and Thanks for All the %s.", "fish")\n'})}),"\n",(0,t.jsx)(o.h3,{id:"key-value-logging",children:"Key-Value Logging"}),"\n",(0,t.jsxs)(o.p,{children:["Key-value helpers log structured fields; mismatched pairs emit ",(0,t.jsx)(o.code,{children:"KEYVALS UNPAIRED"}),"."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'log.Debugw("", "greeting", "Hello", "target", "boy")\nlog.Infow("", "number", 42)\nlog.Warnw("", "job", "boss")\nlog.Errorw("", "name", "John Smith")\nlog.Fatalw("", "fruit", "fish")\n'})}),"\n",(0,t.jsx)(o.h2,{id:"global-log",children:"Global Log"}),"\n",(0,t.jsx)(o.p,{children:"Fiber also exposes a global logger for quick messages."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'import "github.com/gofiber/fiber/v3/log"\n\nlog.Info("info")\nlog.Warn("warn")\n'})}),"\n",(0,t.jsxs)(o.p,{children:["The example uses ",(0,t.jsx)(o.code,{children:"log.DefaultLogger"}),", which writes to stdout. The ",(0,t.jsx)(o.a,{href:"https://github.com/gofiber/contrib",children:"contrib"})," repo offers adapters like ",(0,t.jsx)(o.code,{children:"fiberzap"})," and ",(0,t.jsx)(o.code,{children:"fiberzerolog"}),", or you can register your own with ",(0,t.jsx)(o.code,{children:"log.SetLogger"}),"."]}),"\n",(0,t.jsx)(o.p,{children:"Here's an example using a custom logger:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'import (\n    "log"\n    fiberlog "github.com/gofiber/fiber/v3/log"\n)\n\nvar _ fiberlog.AllLogger[*log.Logger] = (*customLogger)(nil)\n\ntype customLogger struct {\n    stdlog *log.Logger\n}\n\n// Implement required methods for the AllLogger interface...\n\n// Inject your custom logger\nfiberlog.SetLogger[*log.Logger](&customLogger{\n    stdlog: log.New(os.Stdout, "CUSTOM ", log.LstdFlags),\n})\n\n// Retrieve the underlying *log.Logger for direct use\nstd := fiberlog.DefaultLogger[*log.Logger]().Logger()\nstd.Println("custom logging")\n'})}),"\n",(0,t.jsx)(o.h2,{id:"set-level",children:"Set Level"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.code,{children:"log.SetLevel"})," sets the minimum level that will be output. The default is ",(0,t.jsx)(o.code,{children:"LevelTrace"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Note:"})," This method is not concurrent safe."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'import "github.com/gofiber/fiber/v3/log"\n\nlog.SetLevel(log.LevelInfo)\n'})}),"\n",(0,t.jsx)(o.p,{children:"Setting the log level allows you to control the verbosity of the logs, filtering out messages below the specified level."}),"\n",(0,t.jsx)(o.h2,{id:"set-output",children:"Set Output"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.code,{children:"log.SetOutput"})," sets where logs are written. By default, they go to the console."]}),"\n",(0,t.jsx)(o.h3,{id:"writing-logs-to-stderr",children:"Writing Logs to Stderr"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'var logger fiberlog.AllLogger[*log.Logger] = &defaultLogger{\n    stdlog: log.New(os.Stderr, "", log.LstdFlags|log.Lshortfile|log.Lmicroseconds),\n    depth:  4,\n}\n'})}),"\n",(0,t.jsx)(o.p,{children:"This lets you route logs to a file, service, or any destination."}),"\n",(0,t.jsx)(o.h3,{id:"writing-logs-to-a-file",children:"Writing Logs to a File"}),"\n",(0,t.jsxs)(o.p,{children:["To write to a file such as ",(0,t.jsx)(o.code,{children:"test.log"}),":"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'// Output to ./test.log file\nf, err := os.OpenFile("test.log", os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)\nif err != nil {\n    log.Fatal("Failed to open log file:", err)\n}\nlog.SetOutput(f)\n'})}),"\n",(0,t.jsx)(o.h3,{id:"writing-logs-to-both-console-and-file",children:"Writing Logs to Both Console and File"}),"\n",(0,t.jsxs)(o.p,{children:["Write to both ",(0,t.jsx)(o.code,{children:"test.log"})," and ",(0,t.jsx)(o.code,{children:"stdout"}),":"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'// Output to ./test.log file\nfile, err := os.OpenFile("test.log", os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0666)\nif err != nil {\n    log.Fatal("Failed to open log file:", err)\n}\niw := io.MultiWriter(os.Stdout, file)\nlog.SetOutput(iw)\n'})}),"\n",(0,t.jsx)(o.h2,{id:"bind-context",children:"Bind Context"}),"\n",(0,t.jsxs)(o.p,{children:["Bind a logger to a context with ",(0,t.jsx)(o.code,{children:"log.WithContext"}),", which returns a ",(0,t.jsx)(o.code,{children:"CommonLogger"})," tied to that context."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:'commonLogger := log.WithContext(ctx)\ncommonLogger.Info("info")\n'})}),"\n",(0,t.jsx)(o.p,{children:"Context binding adds request-specific data for easier tracing."}),"\n",(0,t.jsx)(o.h2,{id:"logger",children:"Logger"}),"\n",(0,t.jsxs)(o.p,{children:["Use ",(0,t.jsx)(o.code,{children:"Logger"})," to access the underlying logger and call its native methods:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-go",children:"logger := fiberlog.DefaultLogger[*log.Logger]() // Get the default logger instance\n\nstdlogger := logger.Logger() // stdlogger is *log.Logger\nstdlogger.SetFlags(0) // Hide timestamp by setting flags to 0\n"})})]})}function c(e={}){let{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},84429:function(e,o,n){n.d(o,{R:()=>i,x:()=>g});var l=n(96540);let t={},r=l.createContext(t);function i(e){let o=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function g(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(r.Provider,{value:o},e.children)}}}]);