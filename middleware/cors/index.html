<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-v3.x docs-doc-page docs-doc-id-middleware/cors" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>CORS | Fiber</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://docs.gofiber.io/middleware/cors /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=v3.x /><meta data-rh=true name=docusaurus_tag content=docs-default-v3.x /><meta data-rh=true name=docsearch:version content=v3.x /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-v3.x /><meta data-rh=true property=og:title content="CORS | Fiber"/><meta data-rh=true name=description content="CORS (Cross-Origin Resource Sharing) middleware for Fiber lets servers control who can access resources and how. It isn't a security feature; it merely relaxes the browser's same-origin policy so cross-origin requests can succeed. Learn more on MDN."/><meta data-rh=true property=og:description content="CORS (Cross-Origin Resource Sharing) middleware for Fiber lets servers control who can access resources and how. It isn't a security feature; it merely relaxes the browser's same-origin policy so cross-origin requests can succeed. Learn more on MDN."/><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://docs.gofiber.io/middleware/cors /><link data-rh=true rel=alternate href=https://docs.gofiber.io/middleware/cors hreflang=en /><link data-rh=true rel=alternate href=https://docs.gofiber.io/middleware/cors hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.gofiber.io/category/-middleware","name":"ğŸ§¬ Middleware","position":1},{"@type":"ListItem","item":"https://docs.gofiber.io/middleware/cors","name":"CORS","position":2}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Fiber RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Fiber Atom Feed"><style>html{visibility:hidden}html[data-theme]{visibility:visible}</style><script>!function(){var e=function(){try{return window.localStorage.getItem("theme")}catch(e){return null}}(),t=e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",t),document.documentElement.setAttribute("data-theme-choice",e||"system"),document.documentElement.style.colorScheme=t,document.body&&(document.body.style.colorScheme=t),new MutationObserver(function(){var e=document.documentElement.getAttribute("data-theme");e&&(document.documentElement.style.colorScheme=e,document.body&&(document.body.style.colorScheme=e))}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}()</script><link rel=icon href=/img/favicon.png><link rel=manifest href=/manifest.json><meta name=theme-color content="rgb(0, 172, 215)"><link rel=stylesheet href=/assets/css/styles.34cc3093.css /><script src=/assets/js/runtime~main.cc386111.js defer></script><script src=/assets/js/main.2b62059c.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg /><link rel=preload as=image href=/img/logo-dark.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#fafbfc;color:#091E42 role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">ğŸŒŸ If you like Fiber, don't forget to give us a star on <a href=https://github.com/gofiber/fiber>Github</a> ğŸŒŸ</div><button type=button aria-label=Close class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a href=https://gofiber.io target=_self rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/img/logo.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/logo-dark.svg alt="Fiber Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/>ğŸ  Home</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>ğŸ§© Extra</a><ul class=dropdown__menu><li><a class=dropdown__link href=/contrib/>ğŸ§¬ Contrib</a><li><a class=dropdown__link href=/storage/>ğŸ“¦ Storage</a><li><a class=dropdown__link href=/template/>ï¸ğŸ“„ï¸ Template</a></ul></div><a href=https://gofiber.io/support target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">â˜• Donate</a><a class="navbar__item navbar__link" href=/recipes/>ğŸ³ Recipes</a><a class="navbar__item navbar__link" href=/blog>ğŸ“° Blog</a><a href=https://github.com/gofiber/awesome-fiber target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">ğŸ˜ Awesome List</a><a href=https://gofiber.io/discord target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">ğŸ’¬ Chat</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link fiber-versions" aria-haspopup=true aria-expanded=false role=button href=/middleware/cors>v3.x</a><ul class=dropdown__menu><li><a class=dropdown__link href=/next/middleware/cors>Next</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/middleware/cors>v3.x</a><li><a class=dropdown__link href=/v2.x/>v2.x</a><li><a class=dropdown__link href=/v1.x/>v1.x</a></ul></div><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" position=right class="navbar__item navbar__link github-stars-navbar-item" aria-label="Fiber on GitHub (loading star count)"><span class=github-stars-navbar-item__icon aria-hidden=true>â­</span><span class=github-stars-navbar-item__count>â€¦</span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link header-github-link" aria-label="GitHub Repository"></a><ul class=dropdown__menu><li><a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class=dropdown__link>ğŸš€ Fiber<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/contrib target=_blank rel="noopener noreferrer" class=dropdown__link>ğŸ§¬ Contrib<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/storage target=_blank rel="noopener noreferrer" class=dropdown__link>ğŸ“¦ Storage<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/template target=_blank rel="noopener noreferrer" class=dropdown__link>ğŸ“„ï¸ Template<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/gofiber/recipes target=_blank rel="noopener noreferrer" class=dropdown__link>ğŸ³ï¸ Recipes<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/><span title="ğŸ‘‹ Welcome" class=linkLabel_WmDU>ğŸ‘‹ Welcome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/whats_new><span title="ğŸ†• What's New in v3" class=linkLabel_WmDU>ğŸ†• What's New in v3</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/category/ï¸-api><span title="ğŸ› ï¸ API" class=categoryLinkLabel_W154>ğŸ› ï¸ API</span></a><button aria-label="Collapse sidebar category 'ğŸ› ï¸ API'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/fiber><span title="ğŸ“¦ Fiber" class=linkLabel_WmDU>ğŸ“¦ Fiber</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/app><span title="ğŸš€ App" class=linkLabel_WmDU>ğŸš€ App</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/ctx><span title="ğŸ§  Ctx" class=linkLabel_WmDU>ğŸ§  Ctx</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/bind><span title="ğŸ“ Bind" class=linkLabel_WmDU>ğŸ“ Bind</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/redirect><span title="ğŸ”„ Redirect" class=linkLabel_WmDU>ğŸ”„ Redirect</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/log><span title="ğŸ“ƒ Log" class=linkLabel_WmDU>ğŸ“ƒ Log</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/hooks><span title="ğŸ£ Hooks" class=linkLabel_WmDU>ğŸ£ Hooks</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/state><span title="ğŸ—‚ï¸ State Management" class=linkLabel_WmDU>ğŸ—‚ï¸ State Management</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/services><span title="ğŸ§© Services" class=linkLabel_WmDU>ğŸ§© Services</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/api/constants><span title="ğŸ“‹ Constants" class=linkLabel_WmDU>ğŸ“‹ Constants</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/category/-middleware><span title="ğŸ§¬ Middleware" class=categoryLinkLabel_W154>ğŸ§¬ Middleware</span></a><button aria-label="Collapse sidebar category 'ğŸ§¬ Middleware'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/adaptor><span title=Adaptor class=linkLabel_WmDU>Adaptor</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/basicauth><span title=BasicAuth class=linkLabel_WmDU>BasicAuth</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/cache><span title=Cache class=linkLabel_WmDU>Cache</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/compress><span title=Compress class=linkLabel_WmDU>Compress</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/middleware/cors><span title=CORS class=linkLabel_WmDU>CORS</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/csrf><span title=CSRF class=linkLabel_WmDU>CSRF</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/earlydata><span title=EarlyData class=linkLabel_WmDU>EarlyData</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/encryptcookie><span title="Encrypt Cookie" class=linkLabel_WmDU>Encrypt Cookie</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/envvar><span title=EnvVar class=linkLabel_WmDU>EnvVar</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/etag><span title=ETag class=linkLabel_WmDU>ETag</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/expvar><span title=ExpVar class=linkLabel_WmDU>ExpVar</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/favicon><span title=Favicon class=linkLabel_WmDU>Favicon</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/healthcheck><span title="Health Check" class=linkLabel_WmDU>Health Check</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/helmet><span title=Helmet class=linkLabel_WmDU>Helmet</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/idempotency><span title=Idempotency class=linkLabel_WmDU>Idempotency</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/keyauth><span title=KeyAuth class=linkLabel_WmDU>KeyAuth</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/limiter><span title=Limiter class=linkLabel_WmDU>Limiter</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/logger><span title=Logger class=linkLabel_WmDU>Logger</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/pprof><span title=Pprof class=linkLabel_WmDU>Pprof</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/proxy><span title=Proxy class=linkLabel_WmDU>Proxy</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/recover><span title=Recover class=linkLabel_WmDU>Recover</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/redirect><span title=Redirect class=linkLabel_WmDU>Redirect</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/requestid><span title=RequestID class=linkLabel_WmDU>RequestID</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/responsetime><span title=ResponseTime class=linkLabel_WmDU>ResponseTime</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/rewrite><span title=Rewrite class=linkLabel_WmDU>Rewrite</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/session><span title=Session class=linkLabel_WmDU>Session</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/skip><span title=Skip class=linkLabel_WmDU>Skip</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/static><span title=Static class=linkLabel_WmDU>Static</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/middleware/timeout><span title=Timeout class=linkLabel_WmDU>Timeout</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/category/-addon><span title="ğŸ”Œ Addon" class=categoryLinkLabel_W154>ğŸ”Œ Addon</span></a><button aria-label="Expand sidebar category 'ğŸ”Œ Addon'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/category/-client><span title="ğŸŒ Client" class=categoryLinkLabel_W154>ğŸŒ Client</span></a><button aria-label="Collapse sidebar category 'ğŸŒ Client'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/client/rest><span title="ğŸ–¥ï¸ REST" class=linkLabel_WmDU>ğŸ–¥ï¸ REST</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/client/request><span title="ğŸ“¤ Request" class=linkLabel_WmDU>ğŸ“¤ Request</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/client/response><span title="ğŸ“¥ Response" class=linkLabel_WmDU>ğŸ“¥ Response</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/client/hooks><span title="ğŸ£ Hooks" class=linkLabel_WmDU>ğŸ£ Hooks</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/client/examples><span title="ğŸ³ Examples" class=linkLabel_WmDU>ğŸ³ Examples</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/category/-guide><span title="ğŸ“– Guide" class=categoryLinkLabel_W154>ğŸ“– Guide</span></a><button aria-label="Collapse sidebar category 'ğŸ“– Guide'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/routing><span title="ğŸ”Œ Routing" class=linkLabel_WmDU>ğŸ”Œ Routing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/grouping><span title="ğŸ­ Grouping" class=linkLabel_WmDU>ğŸ­ Grouping</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/templates><span title="ğŸ“ Templates" class=linkLabel_WmDU>ğŸ“ Templates</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/error-handling><span title="ğŸ› Error Handling" class=linkLabel_WmDU>ğŸ› Error Handling</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/reverse-proxy><span title="ğŸ”„ Reverse Proxy Configuration" class=linkLabel_WmDU>ğŸ”„ Reverse Proxy Configuration</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/validation><span title="ğŸ” Validation" class=linkLabel_WmDU>ğŸ” Validation</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/go-context><span title="ğŸ§  Go Context" class=linkLabel_WmDU>ğŸ§  Go Context</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/faster-fiber><span title="âš¡ Make Fiber Faster" class=linkLabel_WmDU>âš¡ Make Fiber Faster</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/utils><span title="ğŸ§° Utils" class=linkLabel_WmDU>ğŸ§° Utils</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/extractors><span title="ğŸ”¬ Extractors" class=linkLabel_WmDU>ğŸ”¬ Extractors</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/guide/advance-format><span title="ğŸ› Advanced Format" class=linkLabel_WmDU>ğŸ› Advanced Format</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/category/-extra><span title="ğŸ§© Extra" class=categoryLinkLabel_W154>ğŸ§© Extra</span></a><button aria-label="Collapse sidebar category 'ğŸ§© Extra'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/extra/faq><span title="ğŸ¤” FAQ" class=linkLabel_WmDU>ğŸ¤” FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/extra/benchmarks><span title="ğŸ“Š Benchmarks" class=linkLabel_WmDU>ğŸ“Š Benchmarks</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/extra/internal><span title="ğŸ—ï¸ Internal Architecture" class=linkLabel_WmDU>ğŸ—ï¸ Internal Architecture</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/extra/learning-resources><span title="ğŸ“š Learning Resources" class=linkLabel_WmDU>ğŸ“š Learning Resources</span></a></ul></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/category/-middleware><span>ğŸ§¬ Middleware</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>CORS</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CORS</h1></header>
<p>CORS (Cross-Origin Resource Sharing) middleware for <a href=https://github.com/gofiber/fiber target=_blank rel="noopener noreferrer" class="">Fiber</a> lets servers control who can access resources and how. It isn't a security feature; it merely relaxes the browser's same-origin policy so cross-origin requests can succeed. Learn more on <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS target=_blank rel="noopener noreferrer" class="">MDN</a>.</p>
<p>It adds CORS headers to responses, listing allowed origins, methods, and headers, and handles preflight checks.</p>
<p>Use the <code>AllowOrigins</code> option to define which origins may send cross-origin requests. It accepts single origins, lists, subdomain patterns, wildcards, and supports dynamic validation with <code>AllowOriginsFunc</code>.</p>
<p>The middleware normalizes <code>AllowOrigins</code>, verifies HTTP/HTTPS schemes, and strips trailing slashes. Invalid origins cause a panic. Panic messages and logs redact misconfigured origins by default; set <code>DisableValueRedaction</code> to <code>true</code> if you need the raw value for troubleshooting.</p>
<p>Avoid <a href=#common-pitfalls class="">common pitfalls</a> such as using wildcard origins with credentials, overly permissive origin lists, or skipping validation with <code>AllowOriginsFunc</code>, as misconfiguration can create security risks.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=signatures>Signatures<a href=#signatures class=hash-link aria-label="Direct link to Signatures" title="Direct link to Signatures" translate=no>â€‹</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">config </span><span class="token operator" style=color:#393A34>...</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Handler</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=examples>Examples<a href=#examples class=hash-link aria-label="Direct link to Examples" title="Direct link to Examples" translate=no>â€‹</a></h2>
<p>Import the middleware package:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"github.com/gofiber/fiber/v3"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"github.com/gofiber/fiber/v3/middleware/cors"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>Once your Fiber app is initialized, apply the middleware in one of the following ways:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=basic-usage>Basic usage<a href=#basic-usage class=hash-link aria-label="Direct link to Basic usage" title="Direct link to Basic usage" translate=no>â€‹</a></h3>
<p>To use the default configuration, simply use <code>cors.New()</code>. This will allow wildcard origins '*', all methods, no credentials, and no headers or exposed headers.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=custom-configuration-specific-origins-headers-etc>Custom configuration (specific origins, headers, etc.)<a href=#custom-configuration-specific-origins-headers-etc class=hash-link aria-label="Direct link to Custom configuration (specific origins, headers, etc.)" title="Direct link to Custom configuration (specific origins, headers, etc.)" translate=no>â€‹</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Initialize default config</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Or extend your config for customization</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOrigins</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"https://gofiber.io"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"https://gofiber.net"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowHeaders</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"Origin"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Content-Type"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Accept"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=dynamic-origin-validation>Dynamic origin validation<a href=#dynamic-origin-validation class=hash-link aria-label="Direct link to Dynamic origin validation" title="Direct link to Dynamic origin validation" translate=no>â€‹</a></h3>
<p>You can use <code>AllowOriginsFunc</code> to programmatically determine whether to allow a request based on its origin. This is useful when you need to validate origins against a database or other dynamic sources. The function should return <code>true</code> if the origin is allowed, and <code>false</code> otherwise.</p>
<p>Be sure to review the <a href=#security-considerations class="">security considerations</a> when using <code>AllowOriginsFunc</code>.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>caution</div><div class=admonitionContent_BuS1><p>Never allow <code>AllowOriginsFunc</code> to return <code>true</code> for all origins. This is particularly crucial when <code>AllowCredentials</code> is set to <code>true</code>. Doing so can bypass the restriction of using a wildcard origin with credentials, exposing your application to serious security threats.<p>If you need to allow wildcard origins, use <code>AllowOrigins</code> with a wildcard <code>"*"</code> instead of <code>AllowOriginsFunc</code>.</div></div>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// dbCheckOrigin checks if the origin is in the list of allowed origins in the database.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>dbCheckOrigin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">db </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sql</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">DB</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> origin </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Placeholder query - adjust according to your database schema and query needs</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    query </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"SELECT COUNT(*) FROM allowed_origins WHERE origin = $1"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>var</span><span class="token plain"> count </span><span class="token builtin">int</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> db</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>QueryRow</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">query</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> origin</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Scan</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>&</span><span class="token plain">count</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// Handle error (e.g., log it); for simplicity, we return false here</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> count </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOriginsFunc</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">origin </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>dbCheckOrigin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">db</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> origin</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=prohibited-usage>Prohibited usage<a href=#prohibited-usage class=hash-link aria-label="Direct link to Prohibited usage" title="Direct link to Prohibited usage" translate=no>â€‹</a></h3>
<p>The following example is prohibited because it can expose your application to security risks. It sets <code>AllowOrigins</code> to <code>"*"</code> (a wildcard) and <code>AllowCredentials</code> to <code>true</code>.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOrigins</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"*"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowCredentials</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>This will result in the following panic:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">panic: [CORS] Configuration error: When 'AllowCredentials' is set to true, 'AllowOrigins' cannot contain a wildcard origin '*'. Please specify allowed origins explicitly or adjust 'AllowCredentials' setting.</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=config>Config<a href=#config class=hash-link aria-label="Direct link to Config" title="Direct link to Config" translate=no>â€‹</a></h2>
<table><thead><tr><th style=text-align:left>Property<th style=text-align:left>Type<th style=text-align:left>Description<th style=text-align:left>Default<tbody><tr><td style=text-align:left>AllowCredentials<td style=text-align:left><code>bool</code><td style=text-align:left>AllowCredentials indicates whether or not the response to the request can be exposed when the credentials flag is true. When used as part of a response to a preflight request, this indicates whether or not the actual request can be made using credentials. Note: If true, AllowOrigins cannot be set to a wildcard (<code>"*"</code>) to prevent security vulnerabilities.<td style=text-align:left><code>false</code><tr><td style=text-align:left>AllowHeaders<td style=text-align:left><code>[]string</code><td style=text-align:left>AllowHeaders defines a list of request headers that can be used when making the actual request. This is in response to a preflight request.<td style=text-align:left><code>[]</code><tr><td style=text-align:left>AllowMethods<td style=text-align:left><code>[]string</code><td style=text-align:left>AllowMethods defines a list of methods allowed when accessing the resource. This is used in response to a preflight request.<td style=text-align:left><code>"GET, POST, HEAD, PUT, DELETE, PATCH"</code><tr><td style=text-align:left>AllowOrigins<td style=text-align:left><code>[]string</code><td style=text-align:left>AllowOrigins defines a list of origins that may access the resource. This supports subdomain matching, so you can use a value like "https://*.example.com" to allow any subdomain of example.com to submit requests. If the special wildcard <code>"*"</code> is present in the list, all origins will be allowed.<td style=text-align:left><code>["*"]</code><tr><td style=text-align:left>AllowOriginsFunc<td style=text-align:left><code>func(origin string) bool</code><td style=text-align:left><code>AllowOriginsFunc</code> is a function that dynamically determines whether to allow a request based on its origin. If this function returns <code>true</code>, the 'Access-Control-Allow-Origin' response header will be set to the request's 'origin' header. This function is only used if the request's origin doesn't match any origin in <code>AllowOrigins</code>.<td style=text-align:left><code>nil</code><tr><td style=text-align:left>AllowPrivateNetwork<td style=text-align:left><code>bool</code><td style=text-align:left>Indicates whether the <code>Access-Control-Allow-Private-Network</code> response header should be set to <code>true</code>, allowing requests from private networks. This aligns with modern security practices for web applications interacting with private networks.<td style=text-align:left><code>false</code><tr><td style=text-align:left>DisableValueRedaction<td style=text-align:left><code>bool</code><td style=text-align:left>Disables redaction of misconfigured origins and settings in panics and logs.<td style=text-align:left><code>false</code><tr><td style=text-align:left>ExposeHeaders<td style=text-align:left><code>[]string</code><td style=text-align:left>ExposeHeaders defines an allowlist of headers that clients are allowed to access.<td style=text-align:left><code>[]</code><tr><td style=text-align:left>MaxAge<td style=text-align:left><code>int</code><td style=text-align:left>MaxAge indicates how long (in seconds) the results of a preflight request can be cached. If you pass MaxAge 0, the Access-Control-Max-Age header will not be added and the browser will use 5 seconds by default. To disable caching completely, pass MaxAge value negative. It will set the Access-Control-Max-Age header to 0.<td style=text-align:left><code>0</code><tr><td style=text-align:left>Next<td style=text-align:left><code>func(fiber.Ctx) bool</code><td style=text-align:left>Next defines a function to skip this middleware when it returns true.<td style=text-align:left><code>nil</code></table>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>If AllowOrigins is a zero value <code>[]string{}</code>, and AllowOriginsFunc is provided, the middleware will not default to allowing all origins with the wildcard value "*". Instead, it will rely on the AllowOriginsFunc to dynamically determine whether to allow a request based on its origin. This provides more flexibility and control over which origins are allowed.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=default-config>Default Config<a href=#default-config class=hash-link aria-label="Direct link to Default Config" title="Direct link to Default Config" translate=no>â€‹</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>var</span><span class="token plain"> ConfigDefault </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Next</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">             </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOriginsFunc</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOrigins</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">     </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"*"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    DisableValueRedaction</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowMethods</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodGet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodPost</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodHead</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodPut</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodDelete</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">MethodPatch</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowHeaders</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowCredentials</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">    </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    ExposeHeaders</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">       </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    MaxAge</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">              </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowPrivateNetwork</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=subdomain-matching>Subdomain Matching<a href=#subdomain-matching class=hash-link aria-label="Direct link to Subdomain Matching" title="Direct link to Subdomain Matching" translate=no>â€‹</a></h2>
<p>The <code>AllowOrigins</code> configuration supports matching subdomains at any level. This means you can use a value like <code>"https://*.example.com"</code> to allow any subdomain of <code>example.com</code> to submit requests, including multiple subdomain levels such as <code>"https://sub.sub.example.com"</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=example>Example<a href=#example class=hash-link aria-label="Direct link to Example" title="Direct link to Example" translate=no>â€‹</a></h3>
<p>If you want to allow CORS requests from any subdomain of <code>example.com</code>, including nested subdomains, you can configure the <code>AllowOrigins</code> like so:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOrigins</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"https://*.example.com"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=how-it-works>How It Works<a href=#how-it-works class=hash-link aria-label="Direct link to How It Works" title="Direct link to How It Works" translate=no>â€‹</a></h2>
<p>The CORS middleware works by adding the necessary CORS headers to responses from your Fiber application. These headers tell browsers what origins, methods, and headers are allowed for cross-origin requests.</p>
<p>When a request arrives, the middleware first checks whether it is a preflight requestâ€”a CORS mechanism that determines if the actual request is safe to send. Preflight requests are HTTP OPTIONS requests with specific CORS headers. If the request is preflight, the middleware responds with the appropriate CORS headers and ends the request.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>Preflight requests are typically sent by browsers before making actual cross-origin requests, especially for methods other than GET or POST, or when custom headers are used.<p>A preflight request is an HTTP OPTIONS request that includes the <code>Origin</code>, <code>Access-Control-Request-Method</code>, and optionally <code>Access-Control-Request-Headers</code> headers. The browser sends this request to check if the server allows the actual request method and headers.</div></div>
<p>If the request is not preflight, the middleware adds the CORS headers to the response and passes the request to the next handler. The actual CORS headers added depend on the configuration of the middleware.</p>
<p>The <code>AllowOrigins</code> option controls which origins can make cross-origin requests. The middleware handles different <code>AllowOrigins</code> configurations as follows:</p>
<ul>
<li class="">
<p><strong>Single origin:</strong> If <code>AllowOrigins</code> is set to a single origin like <code>"http://www.example.com"</code>, and that origin matches the origin of the incoming request, the middleware adds the header <code>Access-Control-Allow-Origin: http://www.example.com</code> to the response.</p>
</li>
<li class="">
<p><strong>Multiple origins:</strong> If <code>AllowOrigins</code> is set to multiple origins like <code>"https://example.com, https://www.example.com"</code>, the middleware picks the origin that matches the origin of the incoming request.</p>
</li>
<li class="">
<p><strong>Subdomain matching:</strong> If <code>AllowOrigins</code> includes <code>"https://*.example.com"</code>, a subdomain like <code>https://sub.example.com</code> will be matched and <code>"https://sub.example.com"</code> will be the header. This will also match <code>https://sub.sub.example.com</code> and so on, but not <code>https://example.com</code>.</p>
</li>
<li class="">
<p><strong>Wildcard origin:</strong> If <code>AllowOrigins</code> is set to <code>"*"</code>, the middleware uses that and adds the header <code>Access-Control-Allow-Origin: *</code> to the response.</p>
</li>
</ul>
<p>In all cases above, except the <strong>Wildcard origin</strong>, the middleware will either add the <code>Access-Control-Allow-Origin</code> header to the response matching the origin of the incoming request, or it will not add the header at all if the origin is not allowed.</p>
<ul>
<li class="">
<p><strong>Programmatic origin validation:</strong>: The middleware also handles the <code>AllowOriginsFunc</code> option, which allows you to programmatically determine if an origin is allowed. If <code>AllowOriginsFunc</code> returns <code>true</code> for an origin, the middleware sets the <code>Access-Control-Allow-Origin</code> header to that origin.</p>
</li>
<li class="">
<p><strong>Null origin handling:</strong> The middleware accepts the special literal value <code>"null"</code> as a valid origin. According to the <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS#origin target=_blank rel="noopener noreferrer" class="">CORS specification</a>, browsers send <code>"null"</code> as the origin for certain privacy-sensitive contexts, such as:</p>
<ul>
<li class="">Requests from sandboxed iframes</li>
<li class="">Requests from <code>file://</code> URLs</li>
<li class="">Requests from <code>data:</code> URLs</li>
<li class="">Cross-origin redirects</li>
</ul>
<p>When using <code>AllowOriginsFunc</code>, if the function returns <code>true</code> for the literal string <code>"null"</code>, the middleware will set <code>Access-Control-Allow-Origin: null</code> in the response. The <code>"null"</code> origin is case-sensitive and must be lowercase.</p>
</li>
</ul>
<p>The <code>AllowMethods</code> option controls which HTTP methods are allowed. For example, if <code>AllowMethods</code> is set to <code>"GET, POST"</code>, the middleware adds the header <code>Access-Control-Allow-Methods: GET, POST</code> to the response.</p>
<p>The <code>AllowHeaders</code> option specifies which headers are allowed in the actual request. The middleware sets the Access-Control-Allow-Headers response header to the value of <code>AllowHeaders</code>. This informs the client which headers it can use in the actual request.</p>
<p>The <code>AllowCredentials</code> option indicates whether the response to the request can be exposed when the credentials flag is true. If <code>AllowCredentials</code> is set to <code>true</code>, the middleware adds the header <code>Access-Control-Allow-Credentials: true</code> to the response. To prevent security vulnerabilities, <code>AllowCredentials</code> cannot be set to <code>true</code> if <code>AllowOrigins</code> is set to a wildcard (<code>*</code>).</p>
<p>The <code>ExposeHeaders</code> option defines an allowlist of headers that clients are allowed to access. If <code>ExposeHeaders</code> is set to <code>"X-Custom-Header"</code>, the middleware adds the header <code>Access-Control-Expose-Headers: X-Custom-Header</code> to the response.</p>
<p>The <code>MaxAge</code> option indicates how long the results of a preflight request can be cached. If <code>MaxAge</code> is set to <code>3600</code>, the middleware adds the header <code>Access-Control-Max-Age: 3600</code> to the response.</p>
<p>The <code>Vary</code> header helps caches store the correct response. For simple requests the middleware sets <code>Vary: Origin</code> unless all origins are allowed. Preflight responses add <code>Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers</code> (and <code>Access-Control-Request-Private-Network</code> when enabled and requested). This ensures caches know when to reuse a response and when to revalidate with the server.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=infrastructure-considerations>Infrastructure Considerations<a href=#infrastructure-considerations class=hash-link aria-label="Direct link to Infrastructure Considerations" title="Direct link to Infrastructure Considerations" translate=no>â€‹</a></h2>
<p>When deploying Fiber applications behind infrastructure components like CDNs, API gateways, load balancers, or reverse proxies, you have two main options for handling CORS:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=option-1-use-infrastructure-level-cors-recommended>Option 1: Use Infrastructure-Level CORS (Recommended)<a href=#option-1-use-infrastructure-level-cors-recommended class=hash-link aria-label="Direct link to Option 1: Use Infrastructure-Level CORS (Recommended)" title="Direct link to Option 1: Use Infrastructure-Level CORS (Recommended)" translate=no>â€‹</a></h3>
<p><strong>For most production deployments, it is often preferable to handle CORS at the infrastructure level</strong> rather than in your Fiber application. This approach offers several advantages:</p>
<ul>
<li class=""><strong>Better Performance</strong>: CORS headers are added at the edge, closer to the client</li>
<li class=""><strong>Reduced Server Load</strong>: Preflight requests are handled without reaching your application</li>
<li class=""><strong>Centralized Configuration</strong>: Manage CORS policies alongside other infrastructure settings</li>
<li class=""><strong>Built-in Caching</strong>: Infrastructure providers optimize CORS response caching</li>
</ul>
<p><strong>Common infrastructure CORS solutions:</strong></p>
<ul>
<li class=""><strong>CDNs</strong>: CloudFront, CloudFlare, Azure CDN - handle CORS at edge locations</li>
<li class=""><strong>API Gateways</strong>: AWS API Gateway, Google Cloud API Gateway - centralized CORS management</li>
<li class=""><strong>Load Balancers</strong>: Application Load Balancers with CORS rules</li>
<li class=""><strong>Reverse Proxies</strong>: Nginx, Apache with CORS modules</li>
</ul>
<p>If using infrastructure-level CORS, <strong>disable Fiber's CORS middleware</strong> to avoid conflicts:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Don't use both - choose one approach</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// app.Use(cors.New()) // Remove this line when using infrastructure CORS</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=option-2-application-level-cors-fiber-middleware>Option 2: Application-Level CORS (Fiber Middleware)<a href=#option-2-application-level-cors-fiber-middleware class=hash-link aria-label="Direct link to Option 2: Application-Level CORS (Fiber Middleware)" title="Direct link to Option 2: Application-Level CORS (Fiber Middleware)" translate=no>â€‹</a></h3>
<p>Use Fiber's CORS middleware when you need:</p>
<ul>
<li class=""><strong>Dynamic origin validation</strong> based on application logic</li>
<li class=""><strong>Fine-grained control</strong> over CORS policies per route</li>
<li class=""><strong>Integration with application state</strong> (database-driven origins, etc.)</li>
<li class=""><strong>Development environments</strong> where infrastructure CORS isn't available</li>
</ul>
<p>If choosing this approach, ensure that <strong>all CORS headers reach your Fiber application unchanged</strong>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=required-headers-for-cors-preflight-requests>Required Headers for CORS Preflight Requests<a href=#required-headers-for-cors-preflight-requests class=hash-link aria-label="Direct link to Required Headers for CORS Preflight Requests" title="Direct link to Required Headers for CORS Preflight Requests" translate=no>â€‹</a></h3>
<p>For CORS preflight requests to work correctly, these headers <strong>must not be stripped or modified by caching layers</strong>:</p>
<ul>
<li class=""><code>Origin</code> - Required to identify the requesting origin</li>
<li class=""><code>Access-Control-Request-Method</code> - Required to identify the HTTP method for the actual request</li>
<li class=""><code>Access-Control-Request-Headers</code> - Optional, contains custom headers the actual request will use</li>
<li class=""><code>Access-Control-Request-Private-Network</code> - Optional, for private network access requests</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>Critical Preflight Requirement</div><div class=admonitionContent_BuS1><p>If the <code>Access-Control-Request-Method</code> header is missing from an OPTIONS request, Fiber will not recognize them as CORS preflight requests. Instead, they'll be treated as regular OPTIONS requests, which typically return <code>405 Method Not Allowed</code> since most applications don't define explicit OPTIONS handlers.</div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=cors-response-headers-set-by-fiber>CORS Response Headers (Set by Fiber)<a href=#cors-response-headers-set-by-fiber class=hash-link aria-label="Direct link to CORS Response Headers (Set by Fiber)" title="Direct link to CORS Response Headers (Set by Fiber)" translate=no>â€‹</a></h3>
<p>The middleware sets these response headers based on your configuration:</p>
<p><strong>For all CORS requests:</strong></p>
<ul>
<li class=""><code>Access-Control-Allow-Origin</code> - Set to the allowed origin or "*"</li>
<li class=""><code>Access-Control-Allow-Credentials</code> - Set to "true" when <code>AllowCredentials: true</code></li>
<li class=""><code>Access-Control-Expose-Headers</code> - Lists headers the client can access</li>
<li class=""><code>Vary</code> - Set to "Origin" (unless wildcard origins are used)</li>
</ul>
<p><strong>For preflight responses only:</strong></p>
<ul>
<li class=""><code>Access-Control-Allow-Methods</code> - Lists allowed HTTP methods</li>
<li class=""><code>Access-Control-Allow-Headers</code> - Lists allowed request headers (or echoes the request)</li>
<li class=""><code>Access-Control-Max-Age</code> - Cache duration for preflight results (if MaxAge > 0)</li>
<li class=""><code>Access-Control-Allow-Private-Network</code> - Set to "true" when private network access is allowed</li>
<li class=""><code>Vary</code> - Set to "Access-Control-Request-Method, Access-Control-Request-Headers, Origin"</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=common-infrastructure-issues>Common Infrastructure Issues<a href=#common-infrastructure-issues class=hash-link aria-label="Direct link to Common Infrastructure Issues" title="Direct link to Common Infrastructure Issues" translate=no>â€‹</a></h3>
<p><strong>CDNs (CloudFront, CloudFlare, etc.)</strong>:</p>
<ul>
<li class="">Configure cache policies to forward all CORS headers</li>
<li class="">Ensure OPTIONS requests are not cached inappropriately or cache them correctly with proper Vary headers</li>
<li class="">Don't strip or modify CORS request headers</li>
</ul>
<p><strong>API Gateways</strong>:</p>
<ul>
<li class="">Choose either gateway-level CORS OR application-level CORS, not both</li>
<li class="">If using gateway CORS, disable Fiber's CORS middleware</li>
<li class="">If forwarding to Fiber, ensure all headers pass through unchanged</li>
</ul>
<p><strong>Load Balancers/Reverse Proxies</strong>:</p>
<ul>
<li class="">Preserve all HTTP headers, especially CORS-related ones</li>
<li class="">Don't modify or strip <code>Origin</code>, <code>Access-Control-Request-*</code> headers</li>
</ul>
<p><strong>WAFs/Security Services</strong>:</p>
<ul>
<li class="">Whitelist CORS headers in security rules</li>
<li class="">Ensure OPTIONS requests with CORS headers aren't blocked</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=debugging-cors-issues>Debugging CORS Issues<a href=#debugging-cors-issues class=hash-link aria-label="Direct link to Debugging CORS Issues" title="Direct link to Debugging CORS Issues" translate=no>â€‹</a></h3>
<p>Add this middleware <strong>before</strong> your CORS configuration to debug what headers Fiber receives:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Debug middleware to log CORS preflight requests</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Only use in development or testing environments</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">c </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">fiber</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Ctx</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Method</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"OPTIONS"</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"OPTIONS %s\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Path</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"  Origin: %s\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Origin"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"  Access-Control-Request-Method: %s\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Access-Control-Request-Method"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"  Access-Control-Request-Headers: %s\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Access-Control-Request-Headers"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>New</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Config</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowOrigins</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"https://yourdomain.com"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AllowMethods</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"GET"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"POST"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"PUT"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"DELETE"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"OPTIONS"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<p>Test CORS preflight directly with curl:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"># Test preflight request</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">curl -X OPTIONS https://your-app.com/api/test \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -H "Origin: https://yourdomain.com" \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -H "Access-Control-Request-Method: POST" \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -H "Access-Control-Request-Headers: Content-Type" \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -v</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># Test simple CORS request</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">curl -X GET https://your-app.com/api/test \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -H "Origin: https://yourdomain.com" \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  -v</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=caching-considerations>Caching Considerations<a href=#caching-considerations class=hash-link aria-label="Direct link to Caching Considerations" title="Direct link to Caching Considerations" translate=no>â€‹</a></h3>
<p>The middleware sets appropriate <code>Vary</code> headers to ensure proper caching:</p>
<ul>
<li class=""><strong>Non-wildcard origins</strong>: <code>Vary: Origin</code> is set to cache responses per origin</li>
<li class=""><strong>Preflight requests</strong>: <code>Vary: Access-Control-Request-Method, Access-Control-Request-Headers, Origin</code></li>
<li class=""><strong>OPTIONS without preflight headers</strong>: <code>Vary: Origin</code> to avoid cache poisoning</li>
</ul>
<p>Ensure your infrastructure respects these <code>Vary</code> headers for correct caching behavior.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=choosing-the-right-approach>Choosing the Right Approach<a href=#choosing-the-right-approach class=hash-link aria-label="Direct link to Choosing the Right Approach" title="Direct link to Choosing the Right Approach" translate=no>â€‹</a></h3>
<table><thead><tr><th>Scenario<th>Recommended Approach<tbody><tr><td>Production with CDN/API Gateway<td>Infrastructure-level CORS<tr><td>Dynamic origin validation needed<td>Application-level CORS<tr><td>Microservices with different CORS policies<td>Application-level CORS<tr><td>Simple static origins<td>Infrastructure-level CORS<tr><td>Development/testing<td>Application-level CORS<tr><td>High traffic applications<td>Infrastructure-level CORS</table>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Infrastructure CORS Configuration</div><div class=admonitionContent_BuS1><p>Most cloud providers offer comprehensive CORS documentation:<ul>
<li class=""><a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/header-caching.html#header-caching-web-cors target=_blank rel="noopener noreferrer" class="">AWS CloudFront CORS</a></li>
<li class=""><a href=https://cloud.google.com/storage/docs/cross-origin target=_blank rel="noopener noreferrer" class="">Google Cloud CORS</a></li>
<li class=""><a href=https://docs.microsoft.com/en-us/azure/cdn/cdn-cors target=_blank rel="noopener noreferrer" class="">Azure CDN CORS</a></li>
<li class=""><a href=https://developers.cloudflare.com/fundamentals/get-started/reference/http-request-headers/#cf-connecting-ip target=_blank rel="noopener noreferrer" class="">CloudFlare CORS</a></li>
</ul><p>Configure CORS at the infrastructure level when possible for optimal performance and reduced complexity.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=security-considerations>Security Considerations<a href=#security-considerations class=hash-link aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations" translate=no>â€‹</a></h2>
<p>When configuring CORS, misconfiguration can potentially expose your application to various security risks. Here are some secure configurations and common pitfalls to avoid:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=secure-configurations>Secure Configurations<a href=#secure-configurations class=hash-link aria-label="Direct link to Secure Configurations" title="Direct link to Secure Configurations" translate=no>â€‹</a></h3>
<ul>
<li class="">
<p><strong>Specify Allowed Origins</strong>: Instead of using a wildcard (<code>"*"</code>), specify the exact domains allowed to make requests. For example, <code>AllowOrigins: "https://www.example.com, https://api.example.com"</code> ensures only these domains can make cross-origin requests to your application.</p>
</li>
<li class="">
<p><strong>Use Credentials Carefully</strong>: If your application needs to support credentials in cross-origin requests, ensure <code>AllowCredentials</code> is set to <code>true</code> and specify exact origins in <code>AllowOrigins</code>. Do not use a wildcard origin in this case.</p>
</li>
<li class="">
<p><strong>Limit Exposed Headers</strong>: Only allowlist headers that are necessary for the client-side application by setting <code>ExposeHeaders</code> appropriately. This minimizes the risk of exposing sensitive information.</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=common-pitfalls>Common Pitfalls<a href=#common-pitfalls class=hash-link aria-label="Direct link to Common Pitfalls" title="Direct link to Common Pitfalls" translate=no>â€‹</a></h3>
<ul>
<li class="">
<p><strong>Wildcard Origin with Credentials</strong>: Setting <code>AllowOrigins</code> to <code>"*"</code> (a wildcard) and <code>AllowCredentials</code> to <code>true</code> is a common misconfiguration. This combination is prohibited because it can expose your application to security risks.</p>
</li>
<li class="">
<p><strong>Overly Permissive Origins</strong>: Specifying too many origins or using overly broad patterns (e.g., <code>https://*.example.com</code>) can inadvertently allow malicious sites to interact with your application. Be as specific as possible with allowed origins.</p>
</li>
<li class="">
<p><strong>Inadequate <code>AllowOriginsFunc</code> Validation</strong>: When using <code>AllowOriginsFunc</code> for dynamic origin validation, ensure the function includes robust checks to prevent unauthorized origins from being accepted. Overly permissive validation can lead to security vulnerabilities. Never allow <code>AllowOriginsFunc</code> to return <code>true</code> for all origins. This is particularly crucial when <code>AllowCredentials</code> is set to <code>true</code>. Doing so can bypass the restriction of using a wildcard origin with credentials, exposing your application to serious security threats. If you need to allow wildcard origins, use <code>AllowOrigins</code> with a wildcard <code>"*"</code> instead of <code>AllowOriginsFunc</code>.</p>
</li>
</ul>
<p>Remember, the key to secure CORS configuration is specificity and caution. By carefully selecting which origins, methods, and headers are allowed, you can help protect your application from cross-origin attacks.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-02-22T21:07:58.000Z itemprop=dateModified>Feb 22, 2026</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/middleware/compress><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Compress</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/middleware/csrf><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>CSRF</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#signatures class="table-of-contents__link toc-highlight">Signatures</a><li><a href=#examples class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href=#basic-usage class="table-of-contents__link toc-highlight">Basic usage</a><li><a href=#custom-configuration-specific-origins-headers-etc class="table-of-contents__link toc-highlight">Custom configuration (specific origins, headers, etc.)</a><li><a href=#dynamic-origin-validation class="table-of-contents__link toc-highlight">Dynamic origin validation</a><li><a href=#prohibited-usage class="table-of-contents__link toc-highlight">Prohibited usage</a></ul><li><a href=#config class="table-of-contents__link toc-highlight">Config</a><li><a href=#default-config class="table-of-contents__link toc-highlight">Default Config</a><li><a href=#subdomain-matching class="table-of-contents__link toc-highlight">Subdomain Matching</a><ul><li><a href=#example class="table-of-contents__link toc-highlight">Example</a></ul><li><a href=#how-it-works class="table-of-contents__link toc-highlight">How It Works</a><li><a href=#infrastructure-considerations class="table-of-contents__link toc-highlight">Infrastructure Considerations</a><ul><li><a href=#option-1-use-infrastructure-level-cors-recommended class="table-of-contents__link toc-highlight">Option 1: Use Infrastructure-Level CORS (Recommended)</a><li><a href=#option-2-application-level-cors-fiber-middleware class="table-of-contents__link toc-highlight">Option 2: Application-Level CORS (Fiber Middleware)</a><li><a href=#required-headers-for-cors-preflight-requests class="table-of-contents__link toc-highlight">Required Headers for CORS Preflight Requests</a><li><a href=#cors-response-headers-set-by-fiber class="table-of-contents__link toc-highlight">CORS Response Headers (Set by Fiber)</a><li><a href=#common-infrastructure-issues class="table-of-contents__link toc-highlight">Common Infrastructure Issues</a><li><a href=#debugging-cors-issues class="table-of-contents__link toc-highlight">Debugging CORS Issues</a><li><a href=#caching-considerations class="table-of-contents__link toc-highlight">Caching Considerations</a><li><a href=#choosing-the-right-approach class="table-of-contents__link toc-highlight">Choosing the Right Approach</a></ul><li><a href=#security-considerations class="table-of-contents__link toc-highlight">Security Considerations</a><ul><li><a href=#secure-configurations class="table-of-contents__link toc-highlight">Secure Configurations</a><li><a href=#common-pitfalls class="table-of-contents__link toc-highlight">Common Pitfalls</a></ul></ul></div></div></div></div></main></div></div></div></div>
<script src=/inkeepChatButton.js type=module></script></body>